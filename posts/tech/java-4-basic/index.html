<!doctype html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Java基础查漏补缺 - 理想奈的博客</title><link rel="apple-touch-icon" href="/images/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/images/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/images/favicons/manifest.json">
<link rel="icon" href="/images/favicons/favicon.ico">
<meta name="keywords" content="" />
<meta name="description" content="" /><meta itemprop="name" content="Java基础查漏补缺">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2024-06-13T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2024-06-13T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="15346">
<meta itemprop="keywords" content=",,," /><meta property="og:title" content="Java基础查漏补缺" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/tech/java-4-basic/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-13T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2024-06-13T00:00:00&#43;00:00" /><meta property="og:site_name" content="理想奈的博客" />
<meta property="og:see_also" content="/posts/tech/java-0-audition-4/" /><meta property="og:see_also" content="/posts/tech/java-0-audition-3/" /><meta property="og:see_also" content="/posts/tech/java-0-audition-2/" /><meta property="og:see_also" content="/posts/tech/java-6-autoconfiguration/" /><meta property="og:see_also" content="/posts/tech/java-5-algorithm/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java基础查漏补缺"/>
<meta name="twitter:description" content=""/>
<meta data-name="palette" content="blue"><link rel=stylesheet href="/css/bundle.min.d63d5781d5b3b2441c3e0c8ba081eb171c0ae292f799670fe6d38f68e3a2816d.css" integrity="sha256-1j1XgdWzskQcPgyLoIHrFxwK4pL3mWcP5tOPaOOigW0=" crossorigin="anonymous"><script src="/js/bundle.min.1c471eeba442e80350b91324d765b69b27af83f0de35d552aa2a410bac6ee793.js" integrity="sha256-HEce66RC6ANQuRMk12W2myevg/DeNdVSqipBC6xu55M=" crossorigin="anonymous"></script>
<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", function() {
  renderMathInElement(document.body, {
    delimiters: [
      {left: "$$", right: "$$", display: true},
      {left: "$", right: "$", display: false}
    ],
    macros: {
      "\\ge": "\\geqslant",
      "\\le": "\\leqslant",
      "\\geq": "\\geqslant",
      "\\leq": "\\leqslant"
	}
  });
}); 
</script>
<meta property="og:type" content="index"/>
<meta property="og:title" content="Unzybaryl`s Sekai" />
<meta property="og:image" content="https://eustia.me/images/profile1.jpg" />
<meta property="og:url" content="https://eustia.me/" />





<script type="text/javascript" src="/js/Valine.min.js"></script>
<script type="text/javascript" src="/js/cave-draw.min.js"></script>
<link rel="stylesheet" type="text/css" href="/js/katex.min.css">
<script type="text/javascript" src="/js/katex.min.js"></script>
<script type="text/javascript" src="/js/auto-render.min.js"></script>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" type="text/css" href="/js/font.css">

</head><body><header><nav class="navbar navbar-expand-xl fixed-top">
  <div class="container">
    <a class="navbar-brand" href="/">
      
      
      さぁ、君、取りたまえ
      
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-1 mb-2 mb-lg-0"><form class="search-bar d-flex ms-1" action="/search">
  <div class="input-group input-group-sm">
    <button class="btn btn-search disabled position-absolute left-0" type="submit"><i class="fas fa-fw fa-search"></i></button>
    <input class="form-control rounded-pill" id="searchQuery" name="q" type="search" aria-label="Search">
  </div>
</form></ul><ul class="navbar-nav me-1 mb-2 mb-lg-0 me-1 ms-auto"><li class="nav-item">
          <a class="nav-link" href="/archives">
            <i class="fas fa-fw fa-file-archive"></i>归档
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/about/">
            <i class="fas fa-fw fa-info-circle"></i>关于
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/bin/">
            <i class="fas fa-fw fa-bookmark"></i>废案
          </a>
        </li><li class="nav-item">
  <a class="nav-link" data-bs-toggle="offcanvas" href="#offcanvasSettings" role="button"
    aria-controls="offcanvasSettings">
    <i class="fas fa-fw fa-sliders-h"></i> 设置
  </a>
</li>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings"
  aria-labelledby="offcanvasSettingsLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" w id="offcanvasSettingsLabel"><i class="fas fa-fw fa-sliders-h"></i> 设置</h5>
    <a role="button" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fas fa-2x fa-fw fa-times"></span>
    </a>
  </div>
  <div class="offcanvas-body"><section class="setting">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-adjust"></i> 模式</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="modeSwitcher">
      </div>
    </div>
  </form>
</section>
<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> 字体大小</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>

</div>
</div></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content">
<div class="col-lg-8">
  <div class="container"><nav class="row" aria-label="breadcrumb">
  <ol class="breadcrumb surface"><li class="breadcrumb-item"><a href="/">主页</a></li><li class="breadcrumb-item"><a href="/posts/">文章</a></li><li class="breadcrumb-item"><a href="/posts/tech/">Tech</a></li><li class="breadcrumb-item active">Java基础查漏补缺</li></ol>
</nav><article class="post row surface"><div class="post-panel-wrapper">
  <div class="post-panel d-flex flex-column">
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button">
  <i class="fas fa-fw fa-expand-alt fa-rotate-45"></i>
</a>
  
    

    
    <a class="action" data-bs-container="body" data-bs-toggle="popover" data-bs-html="true" data-bs-placement="bottom"
  data-bs-trigger="focus" tabindex="0"
  data-bs-content="&lt;a target=&#34;_blank&#34; rel=&#34;license&#34; href=&#34;https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&#34;&gt;CC BY-NC-ND 4.0 &lt;i class=&#34;fab fa-fw fa-creative-commons&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-by&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-nc&#34;&gt;&lt;/i&gt;&lt;i class=&#34;fab fa-fw fa-creative-commons-nd&#34;&gt;&lt;/i&gt;&lt;/a&gt;
">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    <a id="btnTOC" class="fas fa-fw fa-list-alt" data-bs-toggle="offcanvas" href="#offcanvasTOC" aria-controls="offcanvasTOC" role="button">
</a>
  </div>
</div>
<h1 class="post-title my-3">Java基础查漏补缺
</h1><div class="post-meta mb-3">
  <span class="post-date me-2">
    <i class="fas fa-fw fa-calendar-alt"></i>2024-06-13
  </span>
  <span class="post-reading-time me-2">
    <i class="fas fa-fw fa-coffee"></i>31 分钟阅读
  </span>
<a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" class="post-taxonomy">#计算机</a><a href="/series/java/" class="post-taxonomy">#Java</a></div>



                
                <div class="addthis_inline_share_toolbox"></div>
            <div class="offcanvas offcanvas-end surface" tabindex="-1" id="offcanvasTOC" aria-labelledby="offcanvasTOCLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasTOCLabel">目录</h5>
    <a role="button" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fas fa-2x fa-fw fa-times"></span>
    </a>
  </div>
  <div class="offcanvas-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#面向对象高级一">面向对象高级一</a>
      <ul>
        <li><a href="#权限修饰符">权限修饰符</a></li>
        <li><a href="#方法重写规则">方法重写规则</a></li>
        <li><a href="#子类构造器">子类构造器</a></li>
      </ul>
    </li>
    <li><a href="#集合框架">集合框架</a>
      <ul>
        <li><a href="#collection接口">Collection接口</a></li>
        <li><a href="#list接口">List接口</a></li>
        <li><a href="#set接口">Set接口</a></li>
        <li><a href="#集合并发修改异常问题">集合并发修改异常问题</a></li>
        <li><a href="#collections工具类">Collections工具类</a></li>
        <li><a href="#map接口">Map接口</a></li>
        <li><a href="#stream流">Stream流</a></li>
      </ul>
    </li>
    <li><a href="#java高级">Java高级</a>
      <ul>
        <li><a href="#反射">反射</a></li>
        <li><a href="#注解">注解</a></li>
        <li><a href="#动态代理">动态代理</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div><div class="post-content mb-3" ><h2 id="面向对象高级一">面向对象高级一</h2>
<h3 id="权限修饰符">权限修饰符</h3>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>在本类中</th>
<th>同一个包下的其他类里</th>
<th>任意包下的子类里</th>
<th>任意包下的任意类里</th>
</tr>
</thead>
<tbody>
<tr>
<td>private</td>
<td>√</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>缺省</td>
<td>√</td>
<td>√</td>
<td></td>
<td></td>
</tr>
<tr>
<td>protected</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>public</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
</tbody>
</table>
<p>说明: protected修饰的方法可以在任意包下的子类里访问, 但是这个子类对应的实例是不能访问的.</p>
<h3 id="方法重写规则">方法重写规则</h3>
<ol>
<li>使用@Override注解可以帮忙检查是否书写错误</li>
<li>重写父类方法, 子类方法访问权限大于等于父类该方法权限(public&gt;protected&gt;缺省)</li>
<li>重写方法返回值, 必须与被重写方法的返回值类型一样, 或者范围更小</li>
<li>私有方法, 静态方法不能被重写</li>
</ol>
<p>个人理解这些规则的目的是为了兼容性和安全性.</p>
<h3 id="子类构造器">子类构造器</h3>
<p>子类的全部构造器, 都会默认先调用父类的无参构造器(super()), 再执行自己. 如果父类没有无参构造器, 必须在子类构造器第一行手写super(&hellip;) 调用父类的有参构造器.</p>
<h2 id="集合框架">集合框架</h2>
<div align=center>
<img src="/images/java-4-basic-1.png"  width="75%" />  
</div>
总结:
<ol>
<li>
<p>如果希望记住元素的添加顺序，需要存储重复的元素，又要频繁的根据索引查询数据？</p>
<p>用ArrayList集合（有序、可重复、有索引），底层基于数组的。（常用）</p>
</li>
<li>
<p>如果希望记住元素的添加顺序，且增删首尾数据的情况较多？</p>
<p>用LinkedList集合（有序、可重复、有索引），底层基于双链表实现的。</p>
</li>
<li>
<p>如果不在意元素顺序，也没有重复元素需要存储，只希望增删改查都快？</p>
<p>用HashSet集合（无序，不重复，无索引），底层基于哈希表实现的。 （常用）</p>
</li>
<li>
<p>如果希望记住元素的添加顺序，也没有重复元素需要存储，且希望增删改查都快？</p>
<p>用LinkedHashSet集合（有序，不重复，无索引）， 底层基于哈希表和双链表。</p>
</li>
<li>
<p>如果要对元素进行排序，也没有重复元素需要存储？且希望增删改查都快？</p>
<p>用TreeSet集合，基于红黑树实现。</p>
</li>
</ol>
<p>Collection接口下有list和set接口, list有序 可重复 有索引, set无序，不重复，无索引.</p>
<h3 id="collection接口">Collection接口</h3>
<h4 id="特有方法">特有方法</h4>
<ul>
<li><strong>add</strong>(): 添加元素</li>
<li><strong>clear</strong>(): 清除集合的元素</li>
<li><strong>isEmpty</strong>(): 判断集合是否为空</li>
<li><strong>Size</strong>(): 获取集合的大小</li>
<li><strong>contains</strong>(Object obj): 判断是否包含</li>
<li><strong>remove</strong>(Object obj): 删除元素,有多个删除第一个</li>
<li><strong>toArray</strong>(): 将集合转为数组</li>
<li><strong>addAll</strong>(Collection): 将一个集合的全部数据倒入到另一个集合中去</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span> <span class="c1">// 多态写法
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="c1">// 1.public boolean add(E e)：添加元素, 添加成功返回true。
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java2&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java2&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java3&#34;</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>        <span class="c1">// 2.public void clear()：清空集合的元素。
</span><span class="ln">11</span><span class="c1"></span>        <span class="c1">//c.clear();
</span><span class="ln">12</span><span class="c1"></span>        <span class="c1">//System.out.println(c);
</span><span class="ln">13</span><span class="c1"></span>
<span class="ln">14</span>        <span class="c1">// 3.public boolean isEmpty()：判断集合是否为空 是空返回true,反之。
</span><span class="ln">15</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span> <span class="c1">// false
</span><span class="ln">16</span><span class="c1"></span>
<span class="ln">17</span>        <span class="c1">// 4.public int size()：获取集合的大小。
</span><span class="ln">18</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
<span class="ln">19</span>
<span class="ln">20</span>        <span class="c1">// 5.public boolean contains(Object obj)：判断集合中是否包含某个元素。
</span><span class="ln">21</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">));</span> <span class="c1">// true
</span><span class="ln">22</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;Java1&#34;</span><span class="o">));</span> <span class="c1">// false
</span><span class="ln">23</span><span class="c1"></span>
<span class="ln">24</span>        <span class="c1">// 6.public boolean remove(E e)：删除某个元素:如果有多个重复元素默认删除前面的第一个！
</span><span class="ln">25</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">));</span>
<span class="ln">26</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="ln">27</span>
<span class="ln">28</span>        <span class="c1">// 7.public Object[] toArray()：把集合转换成数组
</span><span class="ln">29</span><span class="c1"></span>		<span class="c1">//泛型的原因在运行时会擦除, 不能确保集合里都是字符串, 所以是Object数组.
</span><span class="ln">30</span><span class="c1"></span>        <span class="n">Object</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">toArray</span><span class="o">();</span>
<span class="ln">31</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">arr</span><span class="o">));</span>
<span class="ln">32</span>
<span class="ln">33</span>		<span class="c1">//这种方式必须确保集合里面都是字符串
</span><span class="ln">34</span><span class="c1"></span>        <span class="n">String</span><span class="o">[]</span> <span class="n">arr2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">c</span><span class="o">.</span><span class="na">size</span><span class="o">()]);</span> 
<span class="ln">35</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">arr2</span><span class="o">));</span>
<span class="ln">36</span>
<span class="ln">37</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;--------------------------------------------&#34;</span><span class="o">);</span>
<span class="ln">38</span>        <span class="c1">// 把一个集合的全部数据倒入到另一个集合中去。
</span><span class="ln">39</span><span class="c1"></span>        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln">40</span>        <span class="n">c1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">);</span>
<span class="ln">41</span>        <span class="n">c1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java2&#34;</span><span class="o">);</span>
<span class="ln">42</span>        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln">43</span>        <span class="n">c2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java3&#34;</span><span class="o">);</span>
<span class="ln">44</span>        <span class="n">c2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;java4&#34;</span><span class="o">);</span>
<span class="ln">45</span>        <span class="n">c1</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">c2</span><span class="o">);</span> <span class="c1">// 就是把c2集合的全部数据倒入到c1集合中去。
</span><span class="ln">46</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span><span class="o">);</span>
<span class="ln">47</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c2</span><span class="o">);</span>
</code></pre></div><h4 id="遍历">遍历</h4>
<h5 id="1使用迭代器-iterator方法返回一个迭代器">1.使用迭代器, iterator()方法返回一个迭代器</h5>
<p>迭代器方法:</p>
<ul>
<li>boolean hasNext() 询问<strong>当前位置</strong>是否有元素存在</li>
<li>E next() 获取当前位置的元素, 并同时<strong>将迭代器对象指向下一个元素</strong>处.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 2</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;赵敏&#34;</span><span class="o">);</span>
<span class="ln"> 3</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;小昭&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;素素&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="c1">// c.add(&#34;灭绝&#34;);
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="c1">// c = [赵敏, 小昭, 素素]
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="c1">//                       it
</span><span class="ln"> 9</span><span class="c1"></span>
<span class="ln">10</span>        <span class="c1">// 使用迭代器遍历集合
</span><span class="ln">11</span><span class="c1"></span>        <span class="c1">// 1、从集合对象中获取迭代器对象。
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="ln">13</span><span class="c1">//        System.out.println(it.next());
</span><span class="ln">14</span><span class="c1">//        System.out.println(it.next());
</span><span class="ln">15</span><span class="c1">//        System.out.println(it.next());
</span><span class="ln">16</span><span class="c1">//        System.out.println(it.next());
</span><span class="ln">17</span><span class="c1"></span>        <span class="c1">// System.out.println(it.next()); // 出现异常的
</span><span class="ln">18</span><span class="c1"></span>
<span class="ln">19</span>        <span class="c1">// 2、我们应该使用循环结合迭代器遍历集合。
</span><span class="ln">20</span><span class="c1"></span>        <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
<span class="ln">21</span>            <span class="n">String</span> <span class="n">ele</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="ln">22</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ele</span><span class="o">);</span>
<span class="ln">23</span>
<span class="ln">24</span>        <span class="o">}</span>
</code></pre></div><h5 id="2使用for循环-本质是迭代器遍历集合-也可以用来遍历数组">2.使用for循环, 本质是迭代器遍历集合. 也可以用来遍历数组</h5>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 2</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;赵敏&#34;</span><span class="o">);</span>
<span class="ln"> 3</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;小昭&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;素素&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;灭绝&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="c1">// c = [赵敏, 小昭, 素素, 灭绝]
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="c1">//                      ele
</span><span class="ln"> 9</span><span class="c1"></span>
<span class="ln">10</span>        <span class="c1">// 使用增强for遍历集合或者数组。
</span><span class="ln">11</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">ele</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">12</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ele</span><span class="o">);</span>
<span class="ln">13</span>        <span class="o">}</span>
<span class="ln">14</span>
<span class="ln">15</span>        <span class="n">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;迪丽热巴&#34;</span><span class="o">,</span> <span class="s">&#34;古力娜扎&#34;</span><span class="o">,</span> <span class="s">&#34;稀奇哈哈&#34;</span><span class="o">};</span>
<span class="ln">16</span>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">17</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="ln">18</span>        <span class="o">}</span>
</code></pre></div><h5 id="3lambda表达式遍历">3.Lambda表达式遍历</h5>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 2</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;赵敏&#34;</span><span class="o">);</span>
<span class="ln"> 3</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;小昭&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;殷素素&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;周芷若&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="c1">// [赵敏, 小昭, 殷素素, 周芷若]
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="c1">//                     s
</span><span class="ln"> 9</span><span class="c1"></span>
<span class="ln">10</span>        <span class="c1">// default void forEach(Consumer&lt;? super T&gt; action):  结合Lambda表达式遍历集合：
</span><span class="ln">11</span><span class="c1"></span>        <span class="c1">//forEach是Iterable的方法, Collection是Iterable的子接口.
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">c</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="k">new</span> <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="ln">13</span>            <span class="nd">@Override</span>
<span class="ln">14</span>            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">15</span>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">16</span>            <span class="o">}</span>
<span class="ln">17</span>        <span class="o">});</span>
<span class="ln">18</span>
<span class="ln">19</span>        <span class="c1">//@FunctionalInterface函数式注解, 可以将匿名内部类替换为Lambda表达式.
</span><span class="ln">20</span><span class="c1"></span>        <span class="n">c</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
<span class="ln">21</span>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">22</span>        <span class="o">});</span>
<span class="ln">23</span>
<span class="ln">24</span>        <span class="n">c</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span>  <span class="o">-&gt;</span> <span class="o">{</span>
<span class="ln">25</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">26</span>        <span class="o">});</span>
<span class="ln">27</span>
<span class="ln">28</span>        <span class="c1">//只有一行可以去掉大括号
</span><span class="ln">29</span><span class="c1"></span>        <span class="n">c</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span>  <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="o">);</span>
<span class="ln">30</span>
<span class="ln">31</span>        <span class="c1">//函数引用, 前后参数一样的情况下可以用方法引用. System.out这个对象调用println这个方法.
</span><span class="ln">32</span><span class="c1"></span>        <span class="n">c</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span> <span class="o">);</span>
</code></pre></div><h3 id="list接口">List接口</h3>
<h4 id="特有方法-1">特有方法</h4>
<ul>
<li>add(int index, E element): 指定位置插入元素, 如果位置已有元素也不会覆盖, 就是中间插, 别的挤旁边了.</li>
<li>E remove(int index): 删除指定位置的元素, 返回被删除的值</li>
<li>E set(int index, E element): 修改指定索引处的元素, 返回被修改的元素</li>
<li>E get(int index): 返回指定索引处的元素</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="c1">// 1.创建一个ArrayList集合对象（有序、可重复、有索引）
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>  <span class="c1">// 一行经典代码
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;至尊宝&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;至尊宝&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;牛夫人&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span> <span class="c1">// [蜘蛛精, 至尊宝, 至尊宝, 牛夫人]
</span><span class="ln"> 8</span><span class="c1"></span>
<span class="ln"> 9</span>        <span class="c1">// 2.public void add(int index, E element): 在某个索引位置插入元素。
</span><span class="ln">10</span><span class="c1"></span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">2</span><span class="o">,</span> <span class="s">&#34;紫霞仙子&#34;</span><span class="o">);</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">12</span>
<span class="ln">13</span>        <span class="c1">// 3.public E remove(int index): 根据索引删除元素,返回被删除元素
</span><span class="ln">14</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">2</span><span class="o">));</span>
<span class="ln">15</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">16</span>
<span class="ln">17</span>        <span class="c1">// 4.public E get(int index): 返回集合中指定位置的元素。
</span><span class="ln">18</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">3</span><span class="o">));</span>
<span class="ln">19</span>
<span class="ln">20</span>        <span class="c1">// 5.public E set(int index, E element): 修改索引位置处的元素,修改成功后，会返回原来的数据
</span><span class="ln">21</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">3</span><span class="o">,</span> <span class="s">&#34;牛魔王&#34;</span><span class="o">));</span>
<span class="ln">22</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</code></pre></div><h4 id="遍历方式">遍历方式</h4>
<h5 id="1collection支持的它也支持">1.Collection支持的它也支持</h5>
<h5 id="2for循环遍历索引遍历">2.for循环遍历(索引遍历)</h5>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 2</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;糖宝宝&#34;</span><span class="o">);</span>
<span class="ln"> 3</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;至尊宝&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>        <span class="c1">//（1）for循环
</span><span class="ln"> 7</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
<span class="ln"> 8</span>            <span class="c1">// i = 0 1 2
</span><span class="ln"> 9</span><span class="c1"></span>            <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
<span class="ln">10</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">11</span>        <span class="o">}</span>
<span class="ln">12</span>
<span class="ln">13</span>        <span class="c1">//（2）迭代器。
</span><span class="ln">14</span><span class="c1"></span>        <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="ln">15</span>        <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
<span class="ln">16</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
<span class="ln">17</span>        <span class="o">}</span>
<span class="ln">18</span>
<span class="ln">19</span>        <span class="c1">//（3）增强for循环（foreach遍历）
</span><span class="ln">20</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">21</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">22</span>        <span class="o">}</span>
<span class="ln">23</span>
<span class="ln">24</span>        <span class="c1">//（4）JDK 1.8开始之后的Lambda表达式
</span><span class="ln">25</span><span class="c1"></span>        <span class="n">list</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
<span class="ln">26</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">27</span>        <span class="o">});</span>
</code></pre></div><h4 id="arraylist的底层原理">ArrayList的底层原理</h4>
<h5 id="特点-基于数组实现">特点: 基于数组实现</h5>
<ul>
<li>查询速度快(是根据索引查询数据快): 查询数据通过地址值和索引定位, 查询任意数据耗时相同</li>
<li>删除效率低: 可能需要把后面很多的数据进行前移</li>
<li>添加效率极低:可能需要把后面很多数据后移, 或者需要对数组扩容</li>
</ul>
<h5 id="底层原理">底层原理</h5>
<ol>
<li>利用无参构造创建ArrayList时, 底层创建一个长度为0的数组</li>
<li>添加第一个元素时, 底层创建一个新的长度为10的数组</li>
<li>存满时, 扩容至1.5倍</li>
<li>如果一次添加多个数据, 同时即使扩容1.5被也放不下, 那么新创建数组的长度就以刚刚装满为准.</li>
</ol>
<h5 id="实用场景">实用场景</h5>
<p>适合: 查询数据较多, 或者数据量不是很大时</p>
<p>不适合: 数据量大的同时又需要频繁进行增删操作.</p>
<h4 id="linkedlist底层原理">LinkedList底层原理</h4>
<h5 id="特点-基于双链表实现">特点: 基于双链表实现</h5>
<p>查询慢, 增删相对较快. 对首尾元素进行增删改查的速度是极快的.</p>
<h5 id="新增方法">新增方法</h5>
<ul>
<li>addFirst(E e): 开头插入元素, push一样</li>
<li>addLast(E e): 追加元素至末尾, pop一样</li>
<li>E get First(): 返回第一个元素</li>
<li>E get Last(): 返回最后一个元素</li>
<li>E removeFirst(): 从列表中删除并返回第一个元素</li>
<li>E removeLast(): 从列表中删除并返回最后一个元素</li>
</ul>
<h5 id="应用场景">应用场景</h5>
<p>设计队列:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="c1">// 1、创建一个队列。
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="c1">// 入队
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">queue</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">&#34;第1号人&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">queue</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">&#34;第2号人&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">queue</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">&#34;第3号人&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">queue</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="s">&#34;第4号人&#34;</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">queue</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="c1">// 出队
</span><span class="ln">10</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">queue</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">queue</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
<span class="ln">12</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">queue</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">());</span>
<span class="ln">13</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">queue</span><span class="o">);</span>
<span class="ln">14</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;--------------------------------------------------&#34;</span><span class="o">);</span>
</code></pre></div><p>设计栈:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>        <span class="c1">// 2、创建一个栈对象。
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="c1">// 压栈(push)
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&#34;第1颗子弹&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&#34;第2颗子弹&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&#34;第3颗子弹&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="s">&#34;第4颗子弹&#34;</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stack</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="c1">// 出栈(pop)
</span><span class="ln">10</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stack</span><span class="o">.</span><span class="na">pop</span><span class="o">());</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stack</span><span class="o">.</span><span class="na">pop</span><span class="o">());</span>
<span class="ln">12</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stack</span><span class="o">);</span>
</code></pre></div><h3 id="set接口">Set接口</h3>
<p>set下的实现类增删改查都快.</p>
<ul>
<li>HashSet: 无序, 不重复, 无索引</li>
<li>LinkedHashSet: 有序(按添加顺序), 不重复, 无索引</li>
<li>TreeSet: 排序(默认升序), 不重复, 无索引</li>
</ul>
<p>set几乎没有新增的功能, 都是用Collection的.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="c1">// 1、创建一个Set集合的对象
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="c1">//Set&lt;Integer&gt; set = new HashSet&lt;&gt;(); // 创建了一个HashSet的集合对象 一行经典代码  HashSet: 无序 不重复 无索引
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashSet</span><span class="o">&lt;&gt;();</span> <span class="c1">//  有序 不重复 无索引
</span><span class="ln"> 4</span><span class="c1">//         Set&lt;Integer&gt; set = new TreeSet&lt;&gt;(); //  可排序（升序） 不重复 无索引
</span><span class="ln"> 5</span><span class="c1"></span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">666</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">555</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">555</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">888</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">888</span><span class="o">);</span>
<span class="ln">10</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">777</span><span class="o">);</span>
<span class="ln">11</span>        <span class="n">set</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">777</span><span class="o">);</span>
<span class="ln">12</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">set</span><span class="o">);</span>
</code></pre></div><h4 id="hashset底层原理">HashSet底层原理</h4>
<p>Java中每个对象都有个哈希值, 使用hashCode方法返回一个哈希值, 范围是-21亿多到+21亿多. 不同的对象哈希值有可能会相同(哈希碰撞)</p>
<p>HashSet是基于哈希表实现的, 哈希表是一种增删改查性能都较好的数据结构</p>
<p>在Jdk8之前哈希表=数组+链表; 在Jdk8开始, 哈希表=数组+链表+红黑树.</p>
<p>jdk8之前:</p>
<ol>
<li>创建一个默认长度16的数组, 默认加载因子0.75, 数组名table</li>
<li>使用元素的哈希值对数组长度求余, 计算存入位置</li>
<li>如果该位置为null, 直接存入</li>
<li>如果该位置不为null, 调用equals方法比较是否相等, 不相等则存入数组(jdk8之前新元素存入数组老元素挂下面; jdk8开始新元素挂老元素下面)</li>
<li>当占满了16(数组长度)*0.75(加载因子)个位置, 数组就开始扩容, 扩大约两倍, 防止链表过长影响查询效率.</li>
</ol>
<p>jdk8开始, 当链表长度超过8, 同时数组长度&gt;=64时, 自动将链表转成红黑树.</p>
<h5 id="需了解的树结构">需了解的树结构</h5>
<ul>
<li>二叉树: 度小于等于2的数</li>
<li>二叉搜索(查找)树: 小的放左边, 大的放右边, 一样的不放. 可能会出现变成链表的情况.</li>
<li>平衡二叉树: 满足查找二叉树规则情况下, 使这棵树尽量变矮.</li>
<li>红黑树: 可以自平衡的二叉树</li>
</ul>
<h5 id="hashset去重复">HashSet去重复</h5>
<p>要让HashSet将内容一样的两个对象认为是重复的去重的话, 需要重写hashCode和equals方法.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="c1">// 只要两个对象内容一样就返回true
</span><span class="ln"> 2</span><span class="c1"></span>    <span class="nd">@Override</span>
<span class="ln"> 3</span>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 4</span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="ln"> 5</span>        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="ln"> 6</span>        <span class="n">Student</span> <span class="n">student</span> <span class="o">=</span> <span class="o">(</span><span class="n">Student</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
<span class="ln"> 7</span>        <span class="k">return</span> <span class="n">age</span> <span class="o">==</span> <span class="n">student</span><span class="o">.</span><span class="na">age</span> <span class="o">&amp;&amp;</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">student</span><span class="o">.</span><span class="na">height</span><span class="o">,</span> <span class="n">height</span><span class="o">)</span> <span class="o">==</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> <span class="n">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">student</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
<span class="ln"> 8</span>    <span class="o">}</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="c1">// 只要两个对象内容一样，返回的哈希值就是一样的。
</span><span class="ln">11</span><span class="c1"></span>    <span class="nd">@Override</span>
<span class="ln">12</span>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">13</span>        <span class="c1">// 姓名 年龄 身高计算哈希值的
</span><span class="ln">14</span><span class="c1"></span>        <span class="k">return</span> <span class="n">Objects</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">age</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span>
<span class="ln">15</span>    <span class="o">}</span>
</code></pre></div><h4 id="linkedhashset底层原理">LinkedHashSet底层原理</h4>
<p>基于哈希表(数组, 链表, 红黑树)实现. 每个元素额外多了一个双链表机制记录它前后元素的位置. 所以可以有序. 但额外占内存</p>
<h4 id="tresset">TresSet</h4>
<p>底层是基于红黑树实现的排序</p>
<ul>
<li>对于数值, 按数值本身大小排序</li>
<li>对于字符串, 按首字母编号升序排序</li>
<li>对于自定义类型, 默认无法直接排序</li>
</ul>
<h5 id="自定义排序规则">自定义排序规则</h5>
<p>方式一: 自定义类实现Comparable接口, 重写compareTo方法</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span>	<span class="nd">@Override</span>
<span class="ln">2</span>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="n">Student</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">3</span>        <span class="c1">// 如果认为左边对象大于右边对象返回正整数
</span><span class="ln">4</span><span class="c1"></span>        <span class="c1">// 如果认为左边对象小于右边对象返回负整数
</span><span class="ln">5</span><span class="c1"></span>        <span class="c1">// 如果认为左边对象等于右边对象返回0
</span><span class="ln">6</span><span class="c1"></span>        <span class="c1">// 需求：按照年龄升序排序、
</span><span class="ln">7</span><span class="c1"></span>        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="na">age</span><span class="o">;</span>
<span class="ln">8</span>    <span class="o">}</span>
</code></pre></div><p>方式二: 调用TreeSet有参构造器, 设置Comparator对象</p>
<p>(Double.compare比较小数, 返回整数.)</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">set1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 2</span>        <span class="n">set1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">6</span><span class="o">);</span>
<span class="ln"> 3</span>        <span class="n">set1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">set1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">set1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">7</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">set1</span><span class="o">);</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>        <span class="c1">// TreeSet就近选择自己自带的比较器对象进行排序
</span><span class="ln"> 9</span><span class="c1">//        Set&lt;Student&gt; students = new TreeSet&lt;&gt;(new Comparator&lt;Student&gt;() {
</span><span class="ln">10</span><span class="c1">//            @Override
</span><span class="ln">11</span><span class="c1">//            public int compare(Student o1, Student o2) {
</span><span class="ln">12</span><span class="c1">//                // 需求：按照身高升序排序
</span><span class="ln">13</span><span class="c1">//                return Double.compare(o1.getHeight() , o2.getHeight());
</span><span class="ln">14</span><span class="c1">//            }
</span><span class="ln">15</span><span class="c1">//        });
</span><span class="ln">16</span><span class="c1"></span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">&lt;&gt;((</span> <span class="n">o1</span><span class="o">,</span>  <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span>  <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">,</span> <span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()));</span>
<span class="ln">17</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span><span class="n">23</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">7</span><span class="o">));</span>
<span class="ln">18</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;紫霞&#34;</span><span class="o">,</span><span class="n">22</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">8</span><span class="o">));</span>
<span class="ln">19</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;至尊宝&#34;</span><span class="o">,</span><span class="n">26</span><span class="o">,</span> <span class="n">165</span><span class="o">.</span><span class="na">5</span><span class="o">));</span>
<span class="ln">20</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;牛魔王&#34;</span><span class="o">,</span><span class="n">22</span><span class="o">,</span> <span class="n">183</span><span class="o">.</span><span class="na">5</span><span class="o">));</span>
<span class="ln">21</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">students</span><span class="o">);</span>
</code></pre></div><p>注意</p>
<ol>
<li>这里既规定了大小, 也规定了相等, 而相等是不存放的.</li>
<li>如果两者都规定了, TreeSet就近选择自己自带的比较器对象进行排序</li>
<li>默认是升序, 如果想要降序只需要将返回值相应地设反即可(大就返回负数).</li>
</ol>
<h3 id="集合并发修改异常问题">集合并发修改异常问题</h3>
<p>使用集合的remove方法删除的是第一个元素, 这导致出现错位的问题.</p>
<p>解决方案: 1. 使用迭代器自带的删除方法</p>
<p>​				 2. for循环倒着删除, 或者每次删除后下标减1.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;王麻子&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;小李子&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;李爱花&#34;</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;张全蛋&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;晓李&#34;</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;李玉刚&#34;</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">10</span>        <span class="c1">//  [王麻子, 小李子, 李爱花, 张全蛋, 晓李, 李玉刚]
</span><span class="ln">11</span><span class="c1"></span>
<span class="ln">12</span>        <span class="c1">// 需求：找出集合中全部带“李”的名字，并从集合中删除。
</span><span class="ln">13</span><span class="c1">//        Iterator&lt;String&gt; it = list.iterator();
</span><span class="ln">14</span><span class="c1">//        while (it.hasNext()){
</span><span class="ln">15</span><span class="c1">//            String name = it.next();
</span><span class="ln">16</span><span class="c1">//            if(name.contains(&#34;李&#34;)){
</span><span class="ln">17</span><span class="c1">//                list.remove(name);
</span><span class="ln">18</span><span class="c1">//            }
</span><span class="ln">19</span><span class="c1">//        }
</span><span class="ln">20</span><span class="c1">//        System.out.println(list);
</span><span class="ln">21</span><span class="c1"></span>
<span class="ln">22</span>        <span class="c1">// 使用for循环遍历集合并删除集合中带李字的名字
</span><span class="ln">23</span><span class="c1"></span>        <span class="c1">//  [王麻子, 小李子, 李爱花, 张全蛋, 晓李, 李玉刚]
</span><span class="ln">24</span><span class="c1"></span>        <span class="c1">//  [王麻子, 李爱花, 张全蛋, 李玉刚]
</span><span class="ln">25</span><span class="c1"></span>        <span class="c1">//                                i
</span><span class="ln">26</span><span class="c1">//        for (int i = 0; i &lt; list.size(); i++) {
</span><span class="ln">27</span><span class="c1">//            String name = list.get(i);
</span><span class="ln">28</span><span class="c1">//            if(name.contains(&#34;李&#34;)){
</span><span class="ln">29</span><span class="c1">//                list.remove(name);
</span><span class="ln">30</span><span class="c1">//            }
</span><span class="ln">31</span><span class="c1">//        }
</span><span class="ln">32</span><span class="c1">//        System.out.println(list);
</span><span class="ln">33</span><span class="c1"></span>
<span class="ln">34</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---------------------------------------------------------&#34;</span><span class="o">);</span>
<span class="ln">35</span>        <span class="c1">// 怎么解决呢？
</span><span class="ln">36</span><span class="c1"></span>        <span class="c1">// 使用for循环遍历集合并删除集合中带李字的名字
</span><span class="ln">37</span><span class="c1"></span>        <span class="c1">//  [王麻子, 小李子, 李爱花, 张全蛋, 晓李, 李玉刚]
</span><span class="ln">38</span><span class="c1"></span>        <span class="c1">//  [王麻子, 张全蛋]
</span><span class="ln">39</span><span class="c1"></span>        <span class="c1">//                  i
</span><span class="ln">40</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
<span class="ln">41</span>            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
<span class="ln">42</span>            <span class="k">if</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;李&#34;</span><span class="o">)){</span>
<span class="ln">43</span>                <span class="n">list</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="ln">44</span>                <span class="n">i</span><span class="o">--;</span>
<span class="ln">45</span>            <span class="o">}</span>
<span class="ln">46</span>        <span class="o">}</span>
<span class="ln">47</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">48</span>        <span class="c1">// 倒着去删除也是可以的。
</span><span class="ln">49</span><span class="c1"></span>
<span class="ln">50</span>        <span class="c1">// 需求：找出集合中全部带“李”的名字，并从集合中删除。
</span><span class="ln">51</span><span class="c1"></span>        <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
<span class="ln">52</span>        <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
<span class="ln">53</span>            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="ln">54</span>            <span class="k">if</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;李&#34;</span><span class="o">)){</span>
<span class="ln">55</span>                <span class="c1">// list.remove(name); // 并发修改异常的错误。
</span><span class="ln">56</span><span class="c1"></span>                <span class="n">it</span><span class="o">.</span><span class="na">remove</span><span class="o">();</span> <span class="c1">// 删除迭代器当前遍历到的数据，每删除一个数据后，相当于也在底层做了i--
</span><span class="ln">57</span><span class="c1"></span>            <span class="o">}</span>
<span class="ln">58</span>        <span class="o">}</span>
<span class="ln">59</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">60</span>
<span class="ln">61</span>        <span class="c1">// 使用增强for循环遍历集合并删除数据，没有办法解决bug.
</span><span class="ln">62</span><span class="c1">//        for (String name : list) {
</span><span class="ln">63</span><span class="c1">//            if(name.contains(&#34;李&#34;)){
</span><span class="ln">64</span><span class="c1">//                list.remove(name);
</span><span class="ln">65</span><span class="c1">//            }
</span><span class="ln">66</span><span class="c1">//        }
</span><span class="ln">67</span><span class="c1">//        System.out.println(list);
</span><span class="ln">68</span><span class="c1"></span>
<span class="ln">69</span><span class="c1">//        list.forEach(name -&gt; {
</span><span class="ln">70</span><span class="c1">//            if(name.contains(&#34;李&#34;)){
</span><span class="ln">71</span><span class="c1">//                list.remove(name);
</span><span class="ln">72</span><span class="c1">//            }
</span><span class="ln">73</span><span class="c1">//        });
</span><span class="ln">74</span><span class="c1">//        System.out.println(list);
</span><span class="ln">75</span><span class="c1"></span>    <span class="o">}</span>
</code></pre></div><h3 id="collections工具类">Collections工具类</h3>
<p>可变参数, 可以不传也可以传多个(type&hellip; var), 在方法内部就是一个数组, 支持数组的方法.</p>
<p>关于＜? super T＞:<a href="https://blog.csdn.net/weixin_43702146/article/details/125596808" target="_blank">理解Java泛型的复杂写法＜? super T＞,＜? extend T＞</a>
 , 大概＜? super T＞代指T及T的父类; ＜? extend T＞指T及T的子类.</p>
<ul>
<li>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"><span class="ln">1</span>public static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt; c, T...elements)：为集合批量添加数据
</code></pre></div></li>
<li>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"><span class="ln">1</span>public static void shuffle(List&lt;?&gt; list)：打乱List集合中的元素顺序。
</code></pre></div></li>
<li>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"><span class="ln">1</span>public static &lt;T&gt; void sort(List&lt;T&gt; list)：对List集合中的元素进行升序排序。
</code></pre></div></li>
<li>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"><span class="ln">1</span>public static &lt;T&gt; void sort(List&lt;T&gt; list， Comparator&lt;? super T&gt; c): 对List集合中元素，按照比较器对象指定的规则进行排序
</code></pre></div></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>		<span class="c1">// 1、public static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt; c, T...elements)：为集合批量添加数据
</span><span class="ln"> 2</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="s">&#34;张三&#34;</span><span class="o">,</span> <span class="s">&#34;王五&#34;</span><span class="o">,</span> <span class="s">&#34;李四&#34;</span><span class="o">,</span> <span class="s">&#34;张麻子&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>        <span class="c1">// 2、public static void shuffle(List&lt;?&gt; list)：打乱List集合中的元素顺序。
</span><span class="ln"> 7</span><span class="c1"></span>        <span class="n">Collections</span><span class="o">.</span><span class="na">shuffle</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="ln"> 9</span>
<span class="ln">10</span>        <span class="c1">// 3、 public static &lt;T&gt; void sort(List&lt;T&gt; list)：对List集合中的元素进行升序排序。
</span><span class="ln">11</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln">12</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">3</span><span class="o">);</span>
<span class="ln">13</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">5</span><span class="o">);</span>
<span class="ln">14</span>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
<span class="ln">15</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">16</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">17</span>
<span class="ln">18</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln">19</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span><span class="n">23</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">7</span><span class="o">));</span>
<span class="ln">20</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;紫霞&#34;</span><span class="o">,</span><span class="n">22</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">8</span><span class="o">));</span>
<span class="ln">21</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;紫霞&#34;</span><span class="o">,</span><span class="n">22</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">8</span><span class="o">));</span>
<span class="ln">22</span>        <span class="n">students</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;至尊宝&#34;</span><span class="o">,</span><span class="n">26</span><span class="o">,</span> <span class="n">165</span><span class="o">.</span><span class="na">5</span><span class="o">));</span>
<span class="ln">23</span>        <span class="c1">// Collections.sort(students);
</span><span class="ln">24</span><span class="c1"></span>        <span class="c1">// System.out.println(students);
</span><span class="ln">25</span><span class="c1"></span>
<span class="ln">26</span>        <span class="c1">// 4、public static &lt;T&gt; void sort(List&lt;T&gt; list， Comparator&lt;? super T&gt; c): 对List集合中元素，按照比较器对象指定的规则进行排序
</span><span class="ln">27</span><span class="c1"></span>        <span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">students</span><span class="o">,</span> <span class="k">new</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;()</span> <span class="o">{</span>
<span class="ln">28</span>            <span class="nd">@Override</span>
<span class="ln">29</span>            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">Student</span> <span class="n">o1</span><span class="o">,</span> <span class="n">Student</span> <span class="n">o2</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">30</span>                <span class="k">return</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">());</span>
<span class="ln">31</span>            <span class="o">}</span>
<span class="ln">32</span>        <span class="o">});</span>
<span class="ln">33</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">students</span><span class="o">);</span>
</code></pre></div><h3 id="map接口">Map接口</h3>
<div align=center>
<img src="/images/java-4-basic-2.png"  width="75%" />  
</div>
<p>特点(都是由键决定的, 对值没有要求):</p>
<ul>
<li>HashMap: 无序, 不重复, 无索引</li>
<li>LinkedHashMap: 有序, 不重复, 无索引</li>
<li>TreeMap: 按照大小默认升序, 不重复, 无索引</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="c1">// Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); // 一行经典代码。 按照键 无序，不重复，无索引。
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// 有序，不重复，无索引。
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">,</span> <span class="n">100</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">,</span> <span class="n">220</span><span class="o">);</span> <span class="c1">// 后面重复的数据会覆盖前面的数据（键）
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手机&#34;</span><span class="o">,</span> <span class="n">2</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;Java&#34;</span><span class="o">,</span> <span class="n">2</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
<span class="ln">10</span>
<span class="ln">11</span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// 可排序，不重复，无索引
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">23</span><span class="o">,</span> <span class="s">&#34;Java&#34;</span><span class="o">);</span>
<span class="ln">13</span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">23</span><span class="o">,</span> <span class="s">&#34;MySQL&#34;</span><span class="o">);</span>
<span class="ln">14</span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">19</span><span class="o">,</span> <span class="s">&#34;李四&#34;</span><span class="o">);</span>
<span class="ln">15</span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">20</span><span class="o">,</span> <span class="s">&#34;王五&#34;</span><span class="o">);</span>
<span class="ln">16</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map1</span><span class="o">);</span>
<span class="ln">17</span>    <span class="o">}</span>
</code></pre></div><h4 id="map的常用方法">Map的常用方法</h4>
<ol>
<li><strong>put</strong>添加元素: 无序, 不重复, 无索引</li>
<li>public int <strong>size</strong>(): 获取集合的大小</li>
<li>public void <strong>clear</strong>(): 清空集合</li>
<li>public boolean <strong>isEmpty</strong>(): 判断集合是否为空, 为空返回true</li>
<li>public V <strong>get</strong>(Object key): 根据键获取对应值</li>
<li>public V <strong>remove</strong>(Object key): 根据键删除整个元素(删除键会返回键的值)</li>
<li>public  boolean <strong>containsKey</strong>(Object key): 判断是否包含某个键 , 包含返回true</li>
<li>public boolean <strong>containsValue</strong>(Object value): 判断是否包含某个值</li>
<li>public Set<K> <strong>keySet</strong>(): 获取Map集合的全部键</li>
<li>public Collection<V> <strong>values</strong>(): 获取Map集合的全部值</li>
<li><strong>putAll</strong>把其他Map集合的数据倒入到自己集合中来</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="c1">// 1.添加元素: 无序，不重复，无索引。
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 4</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">,</span> <span class="n">100</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">,</span> <span class="n">220</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;手机&#34;</span><span class="o">,</span> <span class="n">2</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;Java&#34;</span><span class="o">,</span> <span class="n">2</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
<span class="ln">10</span>        <span class="c1">// map = {null=null, 手表=220, Java=2, 手机=2}
</span><span class="ln">11</span><span class="c1"></span>
<span class="ln">12</span>        <span class="c1">// 2.public int size():获取集合的大小
</span><span class="ln">13</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
<span class="ln">14</span>
<span class="ln">15</span>        <span class="c1">// 3、public void clear():清空集合
</span><span class="ln">16</span><span class="c1"></span>        <span class="c1">//map.clear();
</span><span class="ln">17</span><span class="c1"></span>        <span class="c1">//System.out.println(map);
</span><span class="ln">18</span><span class="c1"></span>
<span class="ln">19</span>        <span class="c1">// 4.public boolean isEmpty(): 判断集合是否为空，为空返回true ,反之！
</span><span class="ln">20</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">());</span>
<span class="ln">21</span>
<span class="ln">22</span>        <span class="c1">// 5.public V get(Object key)：根据键获取对应值
</span><span class="ln">23</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">);</span>
<span class="ln">24</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">v1</span><span class="o">);</span>
<span class="ln">25</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;手机&#34;</span><span class="o">));</span> <span class="c1">// 2
</span><span class="ln">26</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;张三&#34;</span><span class="o">));</span> <span class="c1">// null
</span><span class="ln">27</span><span class="c1"></span>
<span class="ln">28</span>        <span class="c1">// 6. public V remove(Object key)：根据键删除整个元素(删除键会返回键的值)
</span><span class="ln">29</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">));</span>
<span class="ln">30</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
<span class="ln">31</span>
<span class="ln">32</span>        <span class="c1">// 7.public  boolean containsKey(Object key): 判断是否包含某个键 ，包含返回true ,反之
</span><span class="ln">33</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&#34;手表&#34;</span><span class="o">));</span> <span class="c1">// false
</span><span class="ln">34</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&#34;手机&#34;</span><span class="o">));</span> <span class="c1">// true
</span><span class="ln">35</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&#34;java&#34;</span><span class="o">));</span> <span class="c1">// false
</span><span class="ln">36</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&#34;Java&#34;</span><span class="o">));</span> <span class="c1">// true
</span><span class="ln">37</span><span class="c1"></span>
<span class="ln">38</span>        <span class="c1">// 8.public boolean containsValue(Object value): 判断是否包含某个值。
</span><span class="ln">39</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsValue</span><span class="o">(</span><span class="n">2</span><span class="o">));</span> <span class="c1">// true
</span><span class="ln">40</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">containsValue</span><span class="o">(</span><span class="s">&#34;2&#34;</span><span class="o">));</span> <span class="c1">// false
</span><span class="ln">41</span><span class="c1"></span>
<span class="ln">42</span>        <span class="c1">// 9.public Set&lt;K&gt; keySet(): 获取Map集合的全部键。
</span><span class="ln">43</span><span class="c1"></span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">keySet</span><span class="o">();</span>
<span class="ln">44</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">keys</span><span class="o">);</span>
<span class="ln">45</span>
<span class="ln">46</span>        <span class="c1">// 10.public Collection&lt;V&gt; values(); 获取Map集合的全部值。
</span><span class="ln">47</span><span class="c1"></span>        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">values</span><span class="o">();</span>
<span class="ln">48</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">values</span><span class="o">);</span>
<span class="ln">49</span>
<span class="ln">50</span>        <span class="c1">// 11.把其他Map集合的数据倒入到自己集合中来。(拓展)
</span><span class="ln">51</span><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="ln">52</span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;java1&#34;</span><span class="o">,</span>  <span class="n">10</span><span class="o">);</span>
<span class="ln">53</span>        <span class="n">map1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;java2&#34;</span><span class="o">,</span>  <span class="n">20</span><span class="o">);</span>
<span class="ln">54</span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="ln">55</span>        <span class="n">map2</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;java3&#34;</span><span class="o">,</span>  <span class="n">10</span><span class="o">);</span>
<span class="ln">56</span>        <span class="n">map2</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;java2&#34;</span><span class="o">,</span>  <span class="n">222</span><span class="o">);</span>
<span class="ln">57</span>        <span class="n">map1</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">map2</span><span class="o">);</span> <span class="c1">// putAll：把map2集合中的元素全部倒入一份到map1集合中去。
</span><span class="ln">58</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map1</span><span class="o">);</span>
<span class="ln">59</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map2</span><span class="o">);</span>
<span class="ln">60</span>    <span class="o">}</span>
</code></pre></div><h4 id="遍历-1">遍历</h4>
<h5 id="1-先获取全部键-再找值">1. 先获取全部键, 再找值</h5>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">key</span> <span class="o">:</span> <span class="n">keys</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">2</span>            <span class="c1">// 根据键获取对应的值
</span><span class="ln">3</span><span class="c1"></span>            <span class="kt">double</span> <span class="n">value</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
<span class="ln">4</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">key</span> <span class="o">+</span> <span class="s">&#34;=====&gt;&#34;</span> <span class="o">+</span> <span class="n">value</span><span class="o">);</span>
<span class="ln">5</span>        <span class="o">}</span>
</code></pre></div><h5 id="2-将键值对看做整体遍历">2. 将键值对看做整体遍历</h5>
<p>将键值对封装成一个entry对象, 然后用getKey和getValue取里面的键值.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span>		<span class="c1">// 1、调用Map集合提供entrySet方法，把Map集合转换成键值对类型的Set集合
</span><span class="ln">2</span><span class="c1"></span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Double</span><span class="o">&gt;&gt;</span> <span class="n">entries</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">entrySet</span><span class="o">();</span>
<span class="ln">3</span>        <span class="k">for</span> <span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Double</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">entries</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">4</span>            <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">();</span>
<span class="ln">5</span>            <span class="kt">double</span> <span class="n">value</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
<span class="ln">6</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">key</span> <span class="o">+</span> <span class="s">&#34;----&gt;&#34;</span> <span class="o">+</span> <span class="n">value</span><span class="o">);</span>
<span class="ln">7</span>        <span class="o">}</span>
</code></pre></div><h5 id="3lambda遍历">3.Lambda遍历</h5>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="n">map</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span> <span class="n">k</span><span class="o">,</span>  <span class="n">v</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
<span class="ln">2</span>              <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">k</span> <span class="o">+</span> <span class="s">&#34;----&gt;&#34;</span> <span class="o">+</span> <span class="n">v</span><span class="o">);</span>
<span class="ln">3</span>        <span class="o">});</span>
</code></pre></div><h4 id="hashmap底层原理">HashMap底层原理</h4>
<p>HashMap和HashSet底层原理一模一样, 都是基于哈希表实现, 这是因为Set系列的底层就是基于Map实现, 只是Set只需要键数据, 不需要值数据. 算位置时都是根据键算的, 每个位置放的都是一个Entry对象.</p>
<h4 id="linkedhashmap底层原理">LinkedHashMap底层原理</h4>
<p>底层数据结构依然是基于哈希表实现的, 只是每个键值对元素又额外的多了一个双链表的机制记录元素顺序(保证有序). 实际上: 原来学习的LinkedHashSet集合的底层原理就是LinkedHashMap.</p>
<h4 id="treemap">TreeMap</h4>
<p>TreeMap跟TreeSet集合的底层原理是一样的，都是基于红黑树实现的排序。</p>
<p>TreeMap 集合同样也支持两种方式来指定排序规则</p>
<ul>
<li>让类实现Comparable接口，重写比较规则。</li>
<li>TreeMap集合有一个有参数构造器，支持创建Comparator比较器对象，以便用来指定比较规则。</li>
</ul>
<h3 id="stream流">Stream流</h3>
<h4 id="初识stream流">初识Stream流</h4>
<p>使用stream()方法获得流对象, 然后filter过滤, 其中的s表示对每个列表中的元素进行过滤. 最后使用collect方法传入Collectors.toList()将其转化为列表.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="s">&#34;张三丰&#34;</span><span class="o">,</span><span class="s">&#34;张无忌&#34;</span><span class="o">,</span><span class="s">&#34;周芷若&#34;</span><span class="o">,</span><span class="s">&#34;赵敏&#34;</span><span class="o">,</span><span class="s">&#34;张强&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="c1">// names = [张三丰, 张无忌, 周芷若, 赵敏, 张强]
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="c1">//          name
</span><span class="ln"> 7</span><span class="c1"></span>
<span class="ln"> 8</span>        <span class="c1">// 找出姓张，且是3个字的名字，存入到一个新集合中去。
</span><span class="ln"> 9</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln">10</span>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">name</span> <span class="o">:</span> <span class="n">names</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">11</span>            <span class="k">if</span><span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;张&#34;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="n">3</span><span class="o">){</span>
<span class="ln">12</span>                <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="ln">13</span>            <span class="o">}</span>
<span class="ln">14</span>        <span class="o">}</span>
<span class="ln">15</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="ln">16</span>
<span class="ln">17</span>        <span class="c1">// 开始使用Stream流来解决这个需求。
</span><span class="ln">18</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&#34;张&#34;</span><span class="o">))</span>
<span class="ln">19</span>                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">()==</span><span class="n">3</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
<span class="ln">20</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list2</span><span class="o">);</span>
<span class="ln">21</span>    <span class="o">}</span>
</code></pre></div><h4 id="获取stream流">获取Stream流</h4>
<p>对于List和Set, 调用stream方法即可. 对于Map, 需要分开键值对, 或者直接调用entrySet得到Entry对象的集合再使用Stream</p>
<p>Arrays和Stream类都提供了静态方法来创建Stream: Arrays.stream(), Stream.of().</p>
<p>这里还使用了Stream的foreach方法对stream进行遍历.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="c1">// 1、如何获取List集合的Stream流？
</span><span class="ln"> 3</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 4</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="s">&#34;张三丰&#34;</span><span class="o">,</span><span class="s">&#34;张无忌&#34;</span><span class="o">,</span><span class="s">&#34;周芷若&#34;</span><span class="o">,</span><span class="s">&#34;赵敏&#34;</span><span class="o">,</span><span class="s">&#34;张强&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>        <span class="c1">// 2、如何获取Set集合的Stream流？
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 9</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">set</span><span class="o">,</span> <span class="s">&#34;刘德华&#34;</span><span class="o">,</span><span class="s">&#34;张曼玉&#34;</span><span class="o">,</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span><span class="s">&#34;马德&#34;</span><span class="o">,</span><span class="s">&#34;德玛西亚&#34;</span><span class="o">);</span>
<span class="ln">10</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stream1</span> <span class="o">=</span> <span class="n">set</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="ln">11</span>        <span class="n">stream1</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;德&#34;</span><span class="o">)).</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">));</span>
<span class="ln">12</span>
<span class="ln">13</span>        <span class="c1">// 3、如何获取Map集合的Stream流？
</span><span class="ln">14</span><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Double</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="ln">15</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;古力娜扎&#34;</span><span class="o">,</span> <span class="n">172</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln">16</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;迪丽热巴&#34;</span><span class="o">,</span> <span class="n">168</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln">17</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;马尔扎哈&#34;</span><span class="o">,</span> <span class="n">166</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln">18</span>        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;卡尔扎巴&#34;</span><span class="o">,</span> <span class="n">168</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln">19</span>
<span class="ln">20</span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">keySet</span><span class="o">();</span>
<span class="ln">21</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">ks</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="ln">22</span>
<span class="ln">23</span>        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">values</span><span class="o">();</span>
<span class="ln">24</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">vs</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="ln">25</span>
<span class="ln">26</span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Double</span><span class="o">&gt;&gt;</span> <span class="n">entries</span> <span class="o">=</span> <span class="n">map</span><span class="o">.</span><span class="na">entrySet</span><span class="o">();</span>
<span class="ln">27</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Double</span><span class="o">&gt;&gt;</span> <span class="n">kvs</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="ln">28</span>        <span class="n">kvs</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;巴&#34;</span><span class="o">))</span>
<span class="ln">29</span>                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()+</span> <span class="s">&#34;--&gt;&#34;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">()));</span>
<span class="ln">30</span>
<span class="ln">31</span>        <span class="c1">// 4、如何获取数组的Stream流？
</span><span class="ln">32</span><span class="c1"></span>        <span class="n">String</span><span class="o">[]</span> <span class="n">names2</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;张翠山&#34;</span><span class="o">,</span> <span class="s">&#34;东方不败&#34;</span><span class="o">,</span> <span class="s">&#34;唐大山&#34;</span><span class="o">,</span> <span class="s">&#34;独孤求败&#34;</span><span class="o">};</span>
<span class="ln">33</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">names2</span><span class="o">);</span>
<span class="ln">34</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">names2</span><span class="o">);</span>
<span class="ln">35</span>    <span class="o">}</span>
</code></pre></div><h4 id="stream流的中间方法">Stream流的中间方法</h4>
<p>返回的也是stream, 所以支持链式编程.</p>
<ul>
<li>
<p>filter: 过滤, 滤出满足条件的元素</p>
</li>
<li>
<p>sorted: 默认升序. 如果是复杂的对象需要提供比较器, 第一个大于第二个返回正数就是升序</p>
<p>(对于小数创建比较器, 由于比较器返回的必须是整数, 因此使用Double.compare方法很便利)</p>
</li>
<li>
<p>limit(long maxSize): 取出前面的maxSize个元素</p>
</li>
<li>
<p>skip(long n): 跳过前面n个元素, 还剩size()-n个元素.</p>
</li>
<li>
<p>map: 映射, 将一个东西用另一个东西来表示.</p>
</li>
<li>
<p>distinct: 去重复, 内部使用hashCode和equals比较.</p>
</li>
<li>
<p>concat: 合并两个流为一个, 两个流里面的元素可以不一样, 返回object流.</p>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">scores</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">scores</span><span class="o">,</span> <span class="n">88</span><span class="o">.</span><span class="na">5</span><span class="o">,</span> <span class="n">100</span><span class="o">.</span><span class="na">0</span><span class="o">,</span> <span class="n">60</span><span class="o">.</span><span class="na">0</span><span class="o">,</span> <span class="n">99</span><span class="o">.</span><span class="na">0</span><span class="o">,</span> <span class="n">9</span><span class="o">.</span><span class="na">5</span><span class="o">,</span> <span class="n">99</span><span class="o">.</span><span class="na">6</span><span class="o">,</span> <span class="n">25</span><span class="o">.</span><span class="na">0</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="c1">// 需求1：找出成绩大于等于60分的数据，并升序后，再输出。
</span><span class="ln"> 5</span><span class="c1"></span>        <span class="n">scores</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span> <span class="o">&gt;=</span> <span class="n">60</span><span class="o">).</span><span class="na">sorted</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">));</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 8</span>        <span class="n">Student</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span> <span class="n">26</span><span class="o">,</span> <span class="n">172</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">Student</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span> <span class="n">26</span><span class="o">,</span> <span class="n">172</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln">10</span>        <span class="n">Student</span> <span class="n">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;紫霞&#34;</span><span class="o">,</span> <span class="n">23</span><span class="o">,</span> <span class="n">167</span><span class="o">.</span><span class="na">6</span><span class="o">);</span>
<span class="ln">11</span>        <span class="n">Student</span> <span class="n">s4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;白晶晶&#34;</span><span class="o">,</span> <span class="n">25</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">0</span><span class="o">);</span>
<span class="ln">12</span>        <span class="n">Student</span> <span class="n">s5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;牛魔王&#34;</span><span class="o">,</span> <span class="n">35</span><span class="o">,</span> <span class="n">183</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln">13</span>        <span class="n">Student</span> <span class="n">s6</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;牛夫人&#34;</span><span class="o">,</span> <span class="n">34</span><span class="o">,</span> <span class="n">168</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln">14</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">students</span><span class="o">,</span> <span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">,</span> <span class="n">s3</span><span class="o">,</span> <span class="n">s4</span><span class="o">,</span> <span class="n">s5</span><span class="o">,</span> <span class="n">s6</span><span class="o">);</span>
<span class="ln">15</span>        <span class="c1">// 需求2：找出年龄大于等于23,且年龄小于等于30岁的学生，并按照年龄降序输出.
</span><span class="ln">16</span><span class="c1"></span>        <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">23</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">30</span><span class="o">)</span>
<span class="ln">17</span>                <span class="o">.</span><span class="na">sorted</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">o2</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">-</span> <span class="n">o1</span><span class="o">.</span><span class="na">getAge</span><span class="o">())</span>
<span class="ln">18</span>                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">));</span>
<span class="ln">19</span>
<span class="ln">20</span>        <span class="c1">// 需求3：取出身高最高的前3名学生，并输出。
</span><span class="ln">21</span><span class="c1"></span>        <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">sorted</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()))</span>
<span class="ln">22</span>                <span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="n">3</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="ln">23</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;----------------------------------------------------------------&#34;</span><span class="o">);</span>
<span class="ln">24</span>
<span class="ln">25</span>        <span class="c1">// 需求4：取出身高倒数的2名学生，并输出。   s1 s2 s3 s4 s5 s6
</span><span class="ln">26</span><span class="c1"></span>        <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">sorted</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()))</span>
<span class="ln">27</span>                <span class="o">.</span><span class="na">skip</span><span class="o">(</span><span class="n">students</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="n">2</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="ln">28</span>
<span class="ln">29</span>        <span class="c1">// 需求5：找出身高超过168的学生叫什么名字，要求去除重复的名字，再输出。
</span><span class="ln">30</span><span class="c1"></span>        <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">168</span><span class="o">).</span><span class="na">map</span><span class="o">(</span><span class="n">Student</span><span class="o">::</span><span class="n">getName</span><span class="o">)</span>
<span class="ln">31</span>               <span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="ln">32</span>
<span class="ln">33</span>        <span class="c1">// distinct去重复，自定义类型的对象（希望内容一样就认为重复，重写hashCode,equals）
</span><span class="ln">34</span><span class="c1"></span>        <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">168</span><span class="o">)</span>
<span class="ln">35</span>                <span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="ln">36</span>
<span class="ln">37</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">st1</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;张三&#34;</span><span class="o">,</span> <span class="s">&#34;李四&#34;</span><span class="o">);</span>
<span class="ln">38</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">st2</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;张三2&#34;</span><span class="o">,</span> <span class="s">&#34;李四2&#34;</span><span class="o">,</span> <span class="s">&#34;王五&#34;</span><span class="o">);</span>
<span class="ln">39</span>        <span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">allSt</span> <span class="o">=</span> <span class="n">Stream</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span><span class="n">st1</span><span class="o">,</span> <span class="n">st2</span><span class="o">);</span>
<span class="ln">40</span>        <span class="n">allSt</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="ln">41</span>    <span class="o">}</span>
</code></pre></div><h4 id="stream流的终结方法">Stream流的终结方法</h4>
<ul>
<li>forEach: 每个进行遍历.</li>
<li>count: 返回stream里面的元素个数.</li>
<li>max: 返回装有最大值的一个容(Optional), 必要时提供比较器. 最后使用get()取出</li>
<li>min: 找最小值. 其余同上</li>
</ul>
<h5 id="收集stream流">收集Stream流</h5>
<ul>
<li>collect: 将流处理后的结果收集到一个指定的集合中</li>
<li>toArray: 收集到一个数组中. 默认是Object数组, 如果希望是其他类型需要显式提供</li>
</ul>
<p>收集方式:</p>
<ol>
<li>Collections.toList()</li>
<li>Collections.toSet(): 自动去重复, 去重依赖于hashCode和equals.</li>
<li>Collections.toMap(): 需要提供键和值.</li>
</ol>
<p>注意, 流只能使用一个, 在被收集之后就关闭了.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="ln"> 3</span>        <span class="n">Student</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span> <span class="n">26</span><span class="o">,</span> <span class="n">172</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">Student</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;蜘蛛精&#34;</span><span class="o">,</span> <span class="n">26</span><span class="o">,</span> <span class="n">172</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln"> 5</span>        <span class="n">Student</span> <span class="n">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;紫霞&#34;</span><span class="o">,</span> <span class="n">23</span><span class="o">,</span> <span class="n">167</span><span class="o">.</span><span class="na">6</span><span class="o">);</span>
<span class="ln"> 6</span>        <span class="n">Student</span> <span class="n">s4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;白晶晶&#34;</span><span class="o">,</span> <span class="n">25</span><span class="o">,</span> <span class="n">169</span><span class="o">.</span><span class="na">0</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">Student</span> <span class="n">s5</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;牛魔王&#34;</span><span class="o">,</span> <span class="n">35</span><span class="o">,</span> <span class="n">183</span><span class="o">.</span><span class="na">3</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="n">Student</span> <span class="n">s6</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">(</span><span class="s">&#34;牛夫人&#34;</span><span class="o">,</span> <span class="n">34</span><span class="o">,</span> <span class="n">168</span><span class="o">.</span><span class="na">5</span><span class="o">);</span>
<span class="ln"> 9</span>        <span class="n">Collections</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">students</span><span class="o">,</span> <span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">,</span> <span class="n">s3</span><span class="o">,</span> <span class="n">s4</span><span class="o">,</span> <span class="n">s5</span><span class="o">,</span> <span class="n">s6</span><span class="o">);</span>
<span class="ln">10</span>        <span class="c1">// 需求1：请计算出身高超过168的学生有几人。
</span><span class="ln">11</span><span class="c1"></span>        <span class="kt">long</span> <span class="n">size</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">168</span><span class="o">).</span><span class="na">count</span><span class="o">();</span>
<span class="ln">12</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>
<span class="ln">13</span>
<span class="ln">14</span>        <span class="c1">// 需求2：请找出身高最高的学生对象，并输出。
</span><span class="ln">15</span><span class="c1"></span>        <span class="n">Student</span> <span class="n">s</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">max</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">())).</span><span class="na">get</span><span class="o">();</span>
<span class="ln">16</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln">17</span>
<span class="ln">18</span>        <span class="c1">// 需求3：请找出身高最矮的学生对象，并输出。
</span><span class="ln">19</span><span class="c1"></span>        <span class="n">Student</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">min</span><span class="o">((</span><span class="n">o1</span><span class="o">,</span> <span class="n">o2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Double</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">o1</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">o2</span><span class="o">.</span><span class="na">getHeight</span><span class="o">())).</span><span class="na">get</span><span class="o">();</span>
<span class="ln">20</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ss</span><span class="o">);</span>
<span class="ln">21</span>
<span class="ln">22</span>        <span class="c1">// 需求4：请找出身高超过170的学生对象，并放到一个新集合中去返回。
</span><span class="ln">23</span><span class="c1"></span>        <span class="c1">// 流只能收集一次。
</span><span class="ln">24</span><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students1</span> <span class="o">=</span> <span class="n">students</span>
<span class="ln">25</span>                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
<span class="ln">26</span>                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">170</span><span class="o">)</span>
<span class="ln">27</span>                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
<span class="ln">28</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">students1</span><span class="o">);</span>
<span class="ln">29</span>
<span class="ln">30</span>        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span> <span class="n">students2</span> <span class="o">=</span> <span class="n">students</span>
<span class="ln">31</span>                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
<span class="ln">32</span>                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">170</span><span class="o">)</span>
<span class="ln">33</span>                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span>
<span class="ln">34</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">students2</span><span class="o">);</span>
<span class="ln">35</span>
<span class="ln">36</span>        <span class="c1">// 需求5：请找出身高超过170的学生对象，并把学生对象的名字和身高，存入到一个Map集合返回。
</span><span class="ln">37</span><span class="c1">//        Map&lt;String, Double&gt; map = students
</span><span class="ln">38</span><span class="c1">//                .stream()
</span><span class="ln">39</span><span class="c1">//                .filter(a -&gt; a.getHeight() &gt; 170)
</span><span class="ln">40</span><span class="c1">//                .distinct()
</span><span class="ln">41</span><span class="c1">//                .collect(Collectors.toMap(a -&gt; a.getName(), a -&gt; a.getHeight()));
</span><span class="ln">42</span><span class="c1"></span>
<span class="ln">43</span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Student</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">students</span>
<span class="ln">44</span>                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
<span class="ln">45</span>                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">170</span><span class="o">)</span>
<span class="ln">46</span>                <span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
<span class="ln">47</span>                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">));</span>
<span class="ln">48</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
<span class="ln">49</span>
<span class="ln">50</span>        <span class="c1">// Object[] arr = students.stream().filter(a -&gt; a.getHeight() &gt; 170).toArray();
</span><span class="ln">51</span><span class="c1"></span>        <span class="c1">// Student[] arr = students.stream().filter(a -&gt; a.getHeight() &gt; 170).toArray(len -&gt; new Student[len]);
</span><span class="ln">52</span><span class="c1"></span>        <span class="n">Student</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">students</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">170</span><span class="o">).</span><span class="na">toArray</span><span class="o">(</span><span class="n">Student</span><span class="o">[]::</span><span class="k">new</span><span class="o">);</span>
<span class="ln">53</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">arr</span><span class="o">));</span>
<span class="ln">54</span>    <span class="o">}</span>
</code></pre></div><p>我感觉stream编程里面很多都可以使用方法引用, 这时Lambda表达式都多余了. Lambda表达式里面的变量随便设置.</p>
<h2 id="java高级">Java高级</h2>
<h3 id="反射">反射</h3>
<h4 id="获取类的字节码-class对象">获取类的字节码: Class对象</h4>
<ul>
<li>静态方法: 类名.class</li>
<li>调用Class的方法forName, 填入类的名称</li>
<li>调用Object类的方法getClass, 需要现有这个类的对象, 然后: 对象.getClass()</li>
</ul>
<p>一个类的Class对象只有一个, 不同方式获取的Class对象指向的是同一地址.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln"> 2</span>        <span class="n">Class</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln"> 3</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span> <span class="c1">// 全类名
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">());</span> <span class="c1">// 简名：Student
</span><span class="ln"> 5</span><span class="c1"></span>
<span class="ln"> 6</span>        <span class="n">Class</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;com.itheima.d2_reflect.Student&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span> <span class="o">==</span> <span class="n">c2</span><span class="o">);</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>        <span class="n">Student</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Student</span><span class="o">();</span>
<span class="ln">10</span>        <span class="n">Class</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
<span class="ln">11</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c3</span> <span class="o">==</span> <span class="n">c2</span><span class="o">);</span>
<span class="ln">12</span>    <span class="o">}</span>
</code></pre></div><h4 id="由class获取类的构造器并初始化对象">由Class获取类的构造器并初始化对象</h4>
<p>属于Class类的方法:</p>
<ul>
<li>getConstructors: 获取全部构造器(只能获取public修饰的)</li>
<li>getDeclaredConstructors: 获取全部构造器(只要存在就能拿到)</li>
<li>getConstructor(Class&lt;?&gt;): 获取某个构造器(只能获取public修饰的), 需要时填入对应方法对应参数的字节码.</li>
<li>getDeclaredConstructor(Class&lt;?&gt;): 获取某个构造器(只要存在就能拿到), 需要时填入对应方法对应参数的字节码.</li>
</ul>
<p>一般就用getDeclaredConstructor(s), 都可以得到.</p>
<p>获取类的构造器的作用是初始化一个对象返回, 下面的Constructor对象的方法:</p>
<ul>
<li>T newInstance(Object&hellip; initargs): 调用构造器, 传入对应需要的参数, 完成对象初始化并返回.</li>
<li>setAccessible(boolean): 设置为true, 表示禁止检查访问控制(暴力反射)</li>
</ul>
<p>构造器有个泛型, 不指定的话返回的都是Object类, 需要强转.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@Test</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetConstructors</span><span class="o">(){</span>
<span class="ln"> 3</span>        <span class="c1">// 1、反射第一步：必须先得到这个类的Class对象
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln"> 5</span>        <span class="c1">// 2、获取类的全部构造器
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="c1">// Constructor[] constructors = c.getConstructors();
</span><span class="ln"> 7</span><span class="c1"></span>        <span class="n">Constructor</span><span class="o">[]</span> <span class="n">constructors</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredConstructors</span><span class="o">();</span>
<span class="ln"> 8</span>        <span class="c1">// 3、遍历数组中的每个构造器对象
</span><span class="ln"> 9</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Constructor</span> <span class="n">constructor</span> <span class="o">:</span> <span class="n">constructors</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">10</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">constructor</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">11</span>            <span class="o">+</span> <span class="n">constructor</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">());</span>
<span class="ln">12</span>        <span class="o">}</span>
<span class="ln">13</span>    <span class="o">}</span>
<span class="ln">14</span>
<span class="ln">15</span>    <span class="nd">@Test</span>
<span class="ln">16</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetConstructor</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln">17</span>        <span class="c1">// 1、反射第一步：必须先得到这个类的Class对象
</span><span class="ln">18</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln">19</span>        <span class="c1">// 2、获取类的某个构造器：无参数构造器
</span><span class="ln">20</span><span class="c1"></span>        <span class="n">Constructor</span> <span class="n">constructor1</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">();</span>
<span class="ln">21</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">constructor1</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">22</span>                <span class="o">+</span> <span class="n">constructor1</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">());</span>
<span class="ln">23</span>        <span class="n">constructor1</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止检查访问权限
</span><span class="ln">24</span><span class="c1"></span>        <span class="n">Cat</span> <span class="n">cat</span> <span class="o">=</span> <span class="o">(</span><span class="n">Cat</span><span class="o">)</span> <span class="n">constructor1</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
<span class="ln">25</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cat</span><span class="o">);</span>
<span class="ln">26</span>
<span class="ln">27</span>        <span class="n">AtomicInteger</span> <span class="n">a</span><span class="o">;</span>
<span class="ln">28</span>
<span class="ln">29</span>
<span class="ln">30</span>        <span class="c1">// 3、获取有参数构造器
</span><span class="ln">31</span><span class="c1"></span>        <span class="n">Constructor</span> <span class="n">constructor2</span> <span class="o">=</span>
<span class="ln">32</span>                <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kt">int</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">33</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">constructor2</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">34</span>                <span class="o">+</span> <span class="n">constructor2</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">());</span>
<span class="ln">35</span>        <span class="n">constructor2</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止检查访问权限
</span><span class="ln">36</span><span class="c1"></span>        <span class="n">Cat</span> <span class="n">cat2</span> <span class="o">=</span> <span class="o">(</span><span class="n">Cat</span><span class="o">)</span> <span class="n">constructor2</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">&#34;叮当猫&#34;</span><span class="o">,</span> <span class="n">3</span><span class="o">);</span>
<span class="ln">37</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cat2</span><span class="o">);</span>
<span class="ln">38</span>
<span class="ln">39</span>    <span class="o">}</span>
</code></pre></div><h4 id="由class获取类的成员变量并赋值和取值">由Class获取类的成员变量并赋值和取值</h4>
<p>属于Class类的方法:</p>
<ul>
<li>Field[]  getFields(): 获取类的全部成员变量(只能获取public修饰的)</li>
<li>Field[]  getDeclaredFields(): 获取类的全部成员变量(只要存在就能拿到)</li>
<li>Field  getField(String name): 获取类的某个成员变量(只能获取public修饰的)</li>
<li>Field  getDeclaredField(String name): 获取类的某个成员变量(只要存在就能拿到)</li>
</ul>
<p>获取成员变量是用来赋值和取值, 下面的方法Field对象的</p>
<ul>
<li>set(Object obj, Object value): 赋值, 第一个参数是对象实例, 第二个是赋值的内容</li>
<li>get(Object obj): 取值, 传入对应对象.</li>
<li>setAccessible: 设置禁止检查访问控制</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="nd">@Test</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetFields</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln"> 3</span>        <span class="c1">// 1、反射第一步：必须是先得到类的Class对象
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln"> 5</span>        <span class="c1">// 2、获取类的全部成员变量。
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="n">Field</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredFields</span><span class="o">();</span>
<span class="ln"> 7</span>        <span class="c1">// 3、遍历这个成员变量数组
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 9</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span>  <span class="s">&#34;---&gt; &#34;</span><span class="o">+</span> <span class="n">field</span><span class="o">.</span><span class="na">getType</span><span class="o">());</span>
<span class="ln">10</span>        <span class="o">}</span>
<span class="ln">11</span>        <span class="c1">// 4、定位某个成员变量
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">Field</span> <span class="n">fName</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">);</span>
<span class="ln">13</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fName</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span> <span class="o">+</span> <span class="n">fName</span><span class="o">.</span><span class="na">getType</span><span class="o">());</span>
<span class="ln">14</span>
<span class="ln">15</span>        <span class="n">Field</span> <span class="n">fAge</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">);</span>
<span class="ln">16</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fAge</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span> <span class="o">+</span> <span class="n">fAge</span><span class="o">.</span><span class="na">getType</span><span class="o">());</span>
<span class="ln">17</span>
<span class="ln">18</span>        <span class="c1">// 赋值
</span><span class="ln">19</span><span class="c1"></span>        <span class="n">Cat</span> <span class="n">cat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cat</span><span class="o">();</span>
<span class="ln">20</span>        <span class="n">fName</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止访问控制权限
</span><span class="ln">21</span><span class="c1"></span>        <span class="n">fName</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">cat</span><span class="o">,</span> <span class="s">&#34;卡菲猫&#34;</span><span class="o">);</span>
<span class="ln">22</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">cat</span><span class="o">);</span>
<span class="ln">23</span>
<span class="ln">24</span>        <span class="c1">// 取值
</span><span class="ln">25</span><span class="c1"></span>        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">fName</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">cat</span><span class="o">);</span>
<span class="ln">26</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
<span class="ln">27</span>    <span class="o">}</span>
</code></pre></div><h4 id="由class获取类的成员方法并">由Class获取类的成员方法并</h4>
<p>属于Class类的方法:</p>
<ul>
<li>Method[] getMethods(): 获取类的全部成员方法(只能获取public修饰的)</li>
<li>Method[] getDeclaredMethods(): 获取类的全部成员方法(只要存在)</li>
<li>Method[] getMethod(String name, Class&lt;?&gt;&hellip; ): 获取类的某个成员方法(只能获取public修饰的), 第一个参数是方法名. 对于某些方法重载, 需要填入参数的字节码对象才能定位.</li>
<li>Method[] getDeclaredMethod(String name, Class&lt;?&gt;&hellip; ): 获取类的某个成员方法(只要存在), 第一个参数是方法名. 对于某些方法重载, 需要填入参数的字节码对象才能定位.</li>
</ul>
<p>获取类的成员方法是执行方法, 下面是Method类的方法:</p>
<ul>
<li>Object invoke(Object, Object&hellip; args): 触发某个对象该方法的执行. 第一个参数是对象实例.</li>
<li>setAccessible: 设置禁止检查访问控制</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="nd">@Test</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetMethods</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln"> 3</span>        <span class="c1">//  1、反射第一步：先得到Class对象。
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln"> 5</span>        <span class="c1">// 2、获取类的全部成员方法。
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="n">Method</span><span class="o">[]</span> <span class="n">methods</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">();</span>
<span class="ln"> 7</span>        <span class="c1">// 3、遍历这个数组中的每个方法对象
</span><span class="ln"> 8</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">method</span> <span class="o">:</span> <span class="n">methods</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 9</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">10</span>                    <span class="o">+</span> <span class="n">method</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;----&gt;&#34;</span>
<span class="ln">11</span>                    <span class="o">+</span> <span class="n">method</span><span class="o">.</span><span class="na">getReturnType</span><span class="o">());</span>
<span class="ln">12</span>        <span class="o">}</span>
<span class="ln">13</span>        <span class="c1">//  4、获取某个方法对象
</span><span class="ln">14</span><span class="c1"></span>        <span class="n">Method</span> <span class="n">run</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredMethod</span><span class="o">(</span><span class="s">&#34;run&#34;</span><span class="o">);</span> <span class="c1">// 拿run方法，无参数的
</span><span class="ln">15</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">run</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">16</span>                <span class="o">+</span> <span class="n">run</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;----&gt;&#34;</span>
<span class="ln">17</span>                <span class="o">+</span> <span class="n">run</span><span class="o">.</span><span class="na">getReturnType</span><span class="o">());</span>
<span class="ln">18</span>
<span class="ln">19</span>        <span class="n">Method</span> <span class="n">eat</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredMethod</span><span class="o">(</span><span class="s">&#34;eat&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">20</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">eat</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;---&gt;&#34;</span>
<span class="ln">21</span>                <span class="o">+</span> <span class="n">eat</span><span class="o">.</span><span class="na">getParameterCount</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;----&gt;&#34;</span>
<span class="ln">22</span>                <span class="o">+</span> <span class="n">eat</span><span class="o">.</span><span class="na">getReturnType</span><span class="o">());</span>
<span class="ln">23</span>
<span class="ln">24</span>        <span class="n">Cat</span> <span class="n">cat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cat</span><span class="o">();</span>
<span class="ln">25</span>        <span class="n">run</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止检查访问权限
</span><span class="ln">26</span><span class="c1"></span>        <span class="n">Object</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">cat</span><span class="o">);</span> <span class="c1">// 调用无参数的run方法，用cat对象触发调用的。
</span><span class="ln">27</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
<span class="ln">28</span>
<span class="ln">29</span>        <span class="n">eat</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止检查访问权限
</span><span class="ln">30</span><span class="c1"></span>        <span class="n">String</span> <span class="n">rs2</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">eat</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">cat</span><span class="o">,</span> <span class="s">&#34;鱼儿&#34;</span><span class="o">);</span>
<span class="ln">31</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs2</span><span class="o">);</span>
<span class="ln">32</span>    <span class="o">}</span>
</code></pre></div><p>都有setAccessible是因为Constructor, Field, Method类的父类都有AccessibleObject, 里面就有setAccessible.</p>
<h4 id="作用-应用场景">作用, 应用场景</h4>
<ol>
<li>得到一个类的全部成分然后操作</li>
<li>可以破坏封装性</li>
<li>适合做Java的框架, 基于反射设计通用的功能.</li>
</ol>
<p>需求: 将对象的字段名和对应的值都保存到文件中</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span>	<span class="c1">// 目标：保存任意对象的字段和其数据到文件中去
</span><span class="ln"> 2</span><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">saveObject</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln"> 3</span>        <span class="n">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;junit-reflect-annotation-proxy-app\\src\\data.txt&#34;</span><span class="o">,</span> <span class="kc">true</span><span class="o">));</span>
<span class="ln"> 4</span>        <span class="c1">// obj是任意对象，到底有多少个字段要保存。
</span><span class="ln"> 5</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
<span class="ln"> 6</span>        <span class="n">String</span> <span class="n">cName</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">();</span>
<span class="ln"> 7</span>        <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---------------&#34;</span> <span class="o">+</span> <span class="n">cName</span> <span class="o">+</span> <span class="s">&#34;------------------------&#34;</span><span class="o">);</span>
<span class="ln"> 8</span>        <span class="c1">// 2、从这个类中提取它的全部成员变量
</span><span class="ln"> 9</span><span class="c1"></span>        <span class="n">Field</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredFields</span><span class="o">();</span>
<span class="ln">10</span>        <span class="c1">// 3、遍历每个成员变量。
</span><span class="ln">11</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">12</span>            <span class="c1">// 4、拿到成员变量的名字
</span><span class="ln">13</span><span class="c1"></span>            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
<span class="ln">14</span>            <span class="c1">// 5、拿到这个成员变量在对象中的数据。
</span><span class="ln">15</span><span class="c1"></span>            <span class="n">field</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// 禁止检查访问控制
</span><span class="ln">16</span><span class="c1"></span>            <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">obj</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
<span class="ln">17</span>            <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span> <span class="o">+</span> <span class="s">&#34;=&#34;</span> <span class="o">+</span> <span class="n">value</span><span class="o">);</span>
<span class="ln">18</span>        <span class="o">}</span>
<span class="ln">19</span>        <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="ln">20</span>    <span class="o">}</span>
</code></pre></div><h3 id="注解">注解</h3>
<p>让别的程序根据注解信息决定怎么执行该程序</p>
<h4 id="自定义注解">自定义注解</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">注解名称</span><span class="o">{</span>
<span class="ln">2</span>	<span class="kd">public</span> <span class="n">属性类型</span> <span class="nf">属性名</span><span class="o">()</span> <span class="k">default</span> <span class="n">默认值</span><span class="o">;</span>
<span class="ln">3</span><span class="o">}</span>
</code></pre></div><p>比如:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">MyTest1</span> <span class="o">{</span>
<span class="ln">2</span>    <span class="n">String</span> <span class="nf">aaa</span><span class="o">();</span>
<span class="ln">3</span>    <span class="kt">boolean</span> <span class="nf">bbb</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>
<span class="ln">4</span>    <span class="n">String</span><span class="o">[]</span> <span class="nf">ccc</span><span class="o">();</span>
<span class="ln">5</span><span class="o">}</span>
</code></pre></div><p>在其他类使用注解时, 需要添加上这些属性的值:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@MyTest1</span><span class="o">(</span><span class="n">aaa</span><span class="o">=</span><span class="s">&#34;牛魔王&#34;</span><span class="o">,</span> <span class="n">ccc</span><span class="o">={</span><span class="s">&#34;HTML&#34;</span><span class="o">,</span> <span class="s">&#34;Java&#34;</span><span class="o">})</span>
<span class="ln"> 2</span><span class="c1">// @MyTest2(value = &#34;孙悟空&#34;)
</span><span class="ln"> 3</span><span class="c1">//@MyTest2(&#34;孙悟空&#34;)
</span><span class="ln"> 4</span><span class="c1">//@MyTest2(value = &#34;孙悟空&#34;, age = 1000)
</span><span class="ln"> 5</span><span class="c1"></span><span class="nd">@MyTest2</span><span class="o">(</span><span class="s">&#34;孙悟空&#34;</span><span class="o">)</span>
<span class="ln"> 6</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnnotationTest1</span> <span class="o">{</span>
<span class="ln"> 7</span>    <span class="nd">@MyTest1</span><span class="o">(</span><span class="n">aaa</span><span class="o">=</span><span class="s">&#34;铁扇公主&#34;</span><span class="o">,</span> <span class="n">bbb</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">ccc</span><span class="o">={</span><span class="s">&#34;Python&#34;</span><span class="o">,</span> <span class="s">&#34;前端&#34;</span><span class="o">,</span> <span class="s">&#34;Java&#34;</span><span class="o">})</span>
<span class="ln"> 8</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">(){</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="o">}</span>
<span class="ln">11</span>
<span class="ln">12</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">13</span>
<span class="ln">14</span>    <span class="o">}</span>
<span class="ln">15</span><span class="o">}</span>
</code></pre></div><p>注意: value属性, 如果只有一个value属性的情况下, 使用value属性的时候可以省略value名称不写!! l但是如果有多个属性, 且多个属性没有默认值, 那么value名称是不能省略的.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">MyTest2</span> <span class="o">{</span>
<span class="ln">2</span>    <span class="n">String</span> <span class="nf">value</span><span class="o">();</span> <span class="c1">// 特殊属性
</span><span class="ln">3</span><span class="c1"></span>    <span class="kt">int</span> <span class="nf">age</span><span class="o">()</span> <span class="k">default</span> <span class="n">23</span><span class="o">;</span>
<span class="ln">4</span><span class="o">}</span>
</code></pre></div><h4 id="注解的原理">注解的原理</h4>
<p>注解本质是一个接口, Java中所有注解都是继承了Annotation接口的, 而@注解其实就是一个实现类对象, 实现了该注解以及Annotaion接口.</p>
<p>上面的MyTest1注解经过编译后变成了:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyTest1</span> <span class="kd">extends</span> <span class="n">Annotaion</span><span class="o">{</span>
<span class="ln">2</span>	<span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">aaa</span><span class="o">();</span>
<span class="ln">3</span>	<span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">bbb</span><span class="o">();</span>
<span class="ln">4</span>	<span class="kd">public</span> <span class="kd">abstract</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">ccc</span><span class="o">();</span>
<span class="ln">5</span><span class="o">}</span>
</code></pre></div><h4 id="元注解">元注解</h4>
<p>修饰注解的注解</p>
<p>@Target注解:  声明被修饰的注解只能在哪些位置使用</p>
<ol>
<li>TYPE: 类, 接口</li>
<li>FIELD: 成员变量</li>
<li>METHOD: 成员方法</li>
<li>PARAMETER: 方法参数</li>
<li>CONSTRUCTOR: 构造器</li>
<li>LOCAL_VARIABLE: 局部变量</li>
</ol>
<p>如<code>@Target(ElementType.TYPE)</code>就只能用在类或接口上, 其余的都不行.</p>
<p>@Retention: 声明注解的保留周期</p>
<ol>
<li>SOURCE: 只作用在源码阶段, 字节码文件中不存在</li>
<li>CLASS(默认): 保留到字节码文件阶段, 运行阶段不存在</li>
<li>RUNTIME(开发常用): 一直保留到运行阶段</li>
</ol>
<p>如<code>@Retention(RetentionPolicy.RUNTIME)</code>代码修饰的这个注解运行时也能看到.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln">1</span><span class="nd">@Target</span><span class="o">({</span><span class="n">ElementType</span><span class="o">.</span><span class="na">TYPE</span><span class="o">,</span> <span class="n">ElementType</span><span class="o">.</span><span class="na">METHOD</span><span class="o">})</span> <span class="c1">// 当前被修饰的注解只能用在类上，方法上。
</span><span class="ln">2</span><span class="c1"></span><span class="nd">@Retention</span><span class="o">(</span><span class="n">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span> <span class="c1">// 控制下面的注解一直保留到运行时
</span><span class="ln">3</span><span class="c1"></span><span class="kd">public</span> <span class="nd">@interface</span> <span class="n">MyTest3</span> <span class="o">{</span>
<span class="ln">4</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@MyTest3</span>
<span class="ln"> 2</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnnotationTest2</span> <span class="o">{</span>
<span class="ln"> 3</span>
<span class="ln"> 4</span>    <span class="c1">// @MyTest3
</span><span class="ln"> 5</span><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="nd">@MyTest3</span>
<span class="ln"> 8</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
<span class="ln"> 9</span>
<span class="ln">10</span>    <span class="o">}</span>
<span class="ln">11</span><span class="o">}</span>
</code></pre></div><h4 id="注解的解析">注解的解析</h4>
<p>判断类上, 方法上, 成员变量上等地方是否存在注解, 并将注解的内容解析出来.</p>
<p>要解析谁上面的注解, 就应先把谁拿到; 解析类上的先拿Class对象, 解析方法上的拿Method对象.</p>
<p>Class, Method, Field, Constructor都实现了AnnotatedElement接口, 它们都有解析注解的能力.</p>
<ul>
<li>Annotaion[] getDeclaredAnnotaions(): 获取当前对象上的注解</li>
<li>T getDeclaredAnnotaion(Class&lt;T&gt; annotaionClass): 获取指定的注解对象</li>
<li>boolean isAnnotaionPresent(Class&lt;Annotaion&gt; annotaionClass): 判断某个对象上是否存在某个注解</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="nd">@Test</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parseClass</span><span class="o">(){</span>
<span class="ln"> 3</span>        <span class="c1">// 1、先得到Class对象
</span><span class="ln"> 4</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Demo</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln"> 5</span>        <span class="c1">// 2、解析类上的注解
</span><span class="ln"> 6</span><span class="c1"></span>        <span class="c1">// 判断类上是否包含了某个注解
</span><span class="ln"> 7</span><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">MyTest4</span><span class="o">.</span><span class="na">class</span><span class="o">)){</span>
<span class="ln"> 8</span>            <span class="n">MyTest4</span> <span class="n">myTest4</span> <span class="o">=</span>
<span class="ln"> 9</span>                    <span class="o">(</span><span class="n">MyTest4</span><span class="o">)</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredAnnotation</span><span class="o">(</span><span class="n">MyTest4</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">10</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
<span class="ln">11</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">aaa</span><span class="o">());</span>
<span class="ln">12</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">bbb</span><span class="o">()));</span>
<span class="ln">13</span>        <span class="o">}</span>
<span class="ln">14</span>    <span class="o">}</span>
<span class="ln">15</span>
<span class="ln">16</span>    <span class="nd">@Test</span>
<span class="ln">17</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parseMethod</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln">18</span>        <span class="c1">// 1、先得到Class对象
</span><span class="ln">19</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Demo</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln">20</span>        <span class="n">Method</span> <span class="n">m</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredMethod</span><span class="o">(</span><span class="s">&#34;test1&#34;</span><span class="o">);</span>
<span class="ln">21</span>        <span class="c1">// 2、解析方法上的注解
</span><span class="ln">22</span><span class="c1"></span>        <span class="c1">// 判断方法对象上是否包含了某个注解
</span><span class="ln">23</span><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">MyTest4</span><span class="o">.</span><span class="na">class</span><span class="o">)){</span>
<span class="ln">24</span>            <span class="n">MyTest4</span> <span class="n">myTest4</span> <span class="o">=</span>
<span class="ln">25</span>                    <span class="o">(</span><span class="n">MyTest4</span><span class="o">)</span> <span class="n">m</span><span class="o">.</span><span class="na">getDeclaredAnnotation</span><span class="o">(</span><span class="n">MyTest4</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="ln">26</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">value</span><span class="o">());</span>
<span class="ln">27</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">aaa</span><span class="o">());</span>
<span class="ln">28</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">myTest4</span><span class="o">.</span><span class="na">bbb</span><span class="o">()));</span>
<span class="ln">29</span>        <span class="o">}</span>
<span class="ln">30</span>    <span class="o">}</span>
</code></pre></div><h4 id="模拟junit">模拟junit</h4>
<p>注解就是标记程序, 让其他程序根据注解信息决定如何对待它们.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnnotationTest4</span> <span class="o">{</span>
<span class="ln"> 2</span>    <span class="c1">// @MyTest
</span><span class="ln"> 3</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test1</span><span class="o">(){</span>
<span class="ln"> 4</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===test1====&#34;</span><span class="o">);</span>
<span class="ln"> 5</span>    <span class="o">}</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>    <span class="nd">@MyTest</span>
<span class="ln"> 8</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
<span class="ln"> 9</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===test2====&#34;</span><span class="o">);</span>
<span class="ln">10</span>    <span class="o">}</span>
<span class="ln">11</span>
<span class="ln">12</span>    <span class="nd">@MyTest</span>
<span class="ln">13</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
<span class="ln">14</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===test3====&#34;</span><span class="o">);</span>
<span class="ln">15</span>    <span class="o">}</span>
<span class="ln">16</span>
<span class="ln">17</span>    <span class="nd">@MyTest</span>
<span class="ln">18</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test4</span><span class="o">(){</span>
<span class="ln">19</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;===test4====&#34;</span><span class="o">);</span>
<span class="ln">20</span>    <span class="o">}</span>
<span class="ln">21</span>
<span class="ln">22</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="ln">23</span>        <span class="n">AnnotationTest4</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationTest4</span><span class="o">();</span>
<span class="ln">24</span>        <span class="c1">// 启动程序！
</span><span class="ln">25</span><span class="c1"></span>        <span class="c1">// 1、得到Class对象
</span><span class="ln">26</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">c</span> <span class="o">=</span> <span class="n">AnnotationTest4</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
<span class="ln">27</span>        <span class="c1">// 2、提取这个类中的全部成员方法
</span><span class="ln">28</span><span class="c1"></span>        <span class="n">Method</span><span class="o">[]</span> <span class="n">methods</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">();</span>
<span class="ln">29</span>        <span class="c1">// 3、遍历这个数组中的每个方法，看方法上是否存在@MyTest注解，存在
</span><span class="ln">30</span><span class="c1"></span>        <span class="c1">// 触发该方法执行。
</span><span class="ln">31</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">method</span> <span class="o">:</span> <span class="n">methods</span><span class="o">)</span> <span class="o">{</span>
<span class="ln">32</span>            <span class="k">if</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">MyTest</span><span class="o">.</span><span class="na">class</span><span class="o">)){</span>
<span class="ln">33</span>                <span class="c1">// 说明当前方法上是存在@MyTest，触发当前方法执行。
</span><span class="ln">34</span><span class="c1"></span>                <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
<span class="ln">35</span>            <span class="o">}</span>
<span class="ln">36</span>        <span class="o">}</span>
<span class="ln">37</span>    <span class="o">}</span>
<span class="ln">38</span><span class="o">}</span>
</code></pre></div><h3 id="动态代理">动态代理</h3>
<p>对象嫌身上干的事太多的话, 可以通过代理转义部分职责</p>
<p>对象有什么方法想被代理. 代理一定要有对应的方法.</p>
<p>规范: 对象想被代理需创建一个对应的接口, 并实现这个接口. 之后代理方法返回的就是这个接口</p>
<p>首先通过Proxy.newProxyInstance创建一个代理对象, 该方法有三个参数. 第三个参数是一个回调函数, 之后之后代理对象完成原本对象方法时会先进入这个回调方法, 我们就在这个回调方法里面做功能添加. 原本方法会返回值就return出去.</p>
<p>创建代理对象的方法:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProxyUtil</span> <span class="o">{</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Star</span> <span class="nf">createProxy</span><span class="o">(</span><span class="n">BigStar</span> <span class="n">bigStar</span><span class="o">){</span>
<span class="ln"> 3</span>       <span class="cm">/* newProxyInstance(ClassLoader loader,
</span><span class="ln"> 4</span><span class="cm">                Class&lt;?&gt;[] interfaces,
</span><span class="ln"> 5</span><span class="cm">                InvocationHandler h)
</span><span class="ln"> 6</span><span class="cm">                参数1：用于指定一个类加载器
</span><span class="ln"> 7</span><span class="cm">                参数2：指定生成的代理长什么样子，也就是有哪些方法
</span><span class="ln"> 8</span><span class="cm">                参数3：用来指定生成的代理对象要干什么事情
</span><span class="ln"> 9</span><span class="cm">                */</span>
<span class="ln">10</span>        <span class="c1">// Star starProxy = ProxyUtil.createProxy(s);
</span><span class="ln">11</span><span class="c1"></span>        <span class="c1">// starProxy.sing(&#34;好日子&#34;) starProxy.dance()
</span><span class="ln">12</span><span class="c1"></span>        <span class="n">Star</span> <span class="n">starProxy</span> <span class="o">=</span> <span class="o">(</span><span class="n">Star</span><span class="o">)</span> <span class="n">Proxy</span><span class="o">.</span><span class="na">newProxyInstance</span><span class="o">(</span><span class="n">ProxyUtil</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">(),</span>
<span class="ln">13</span>                <span class="k">new</span> <span class="n">Class</span><span class="o">[]{</span><span class="n">Star</span><span class="o">.</span><span class="na">class</span><span class="o">},</span> <span class="k">new</span> <span class="n">InvocationHandler</span><span class="o">()</span> <span class="o">{</span>
<span class="ln">14</span>                    <span class="nd">@Override</span> <span class="c1">// 回调方法
</span><span class="ln">15</span><span class="c1"></span>                    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Object</span> <span class="n">proxy</span><span class="o">,</span> <span class="n">Method</span> <span class="n">method</span><span class="o">,</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
<span class="ln">16</span>                        <span class="c1">// 代理对象要做的事情，会在这里写代码
</span><span class="ln">17</span><span class="c1"></span>                        <span class="k">if</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;sing&#34;</span><span class="o">)){</span>
<span class="ln">18</span>                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;准备话筒，收钱20万&#34;</span><span class="o">);</span>
<span class="ln">19</span>                        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;dance&#34;</span><span class="o">)){</span>
<span class="ln">20</span>                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;准备场地，收钱1000万&#34;</span><span class="o">);</span>
<span class="ln">21</span>                        <span class="o">}</span>
<span class="ln">22</span>                        <span class="k">return</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">bigStar</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
<span class="ln">23</span>                    <span class="o">}</span>
<span class="ln">24</span>                <span class="o">});</span>
<span class="ln">25</span>        <span class="k">return</span> <span class="n">starProxy</span><span class="o">;</span>
<span class="ln">26</span>    <span class="o">}</span>
<span class="ln">27</span><span class="o">}</span>
</code></pre></div><p>实体类</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigStar</span> <span class="kd">implements</span> <span class="n">Star</span><span class="o">{</span>
<span class="ln"> 2</span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 3</span>
<span class="ln"> 4</span>    <span class="kd">public</span> <span class="nf">BigStar</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 5</span>        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="ln"> 6</span>    <span class="o">}</span>
<span class="ln"> 7</span>
<span class="ln"> 8</span>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sing</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
<span class="ln"> 9</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">+</span> <span class="s">&#34;正在唱：&#34;</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
<span class="ln">10</span>        <span class="k">return</span> <span class="s">&#34;谢谢！谢谢！&#34;</span><span class="o">;</span>
<span class="ln">11</span>    <span class="o">}</span>
<span class="ln">12</span>
<span class="ln">13</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dance</span><span class="o">(){</span>
<span class="ln">14</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span>  <span class="o">+</span> <span class="s">&#34;正在优美的跳舞~~&#34;</span><span class="o">);</span>
<span class="ln">15</span>    <span class="o">}</span>
<span class="ln">16</span><span class="o">}</span>
</code></pre></div><p>测试</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
<span class="ln"> 2</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="ln"> 3</span>        <span class="n">BigStar</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigStar</span><span class="o">(</span><span class="s">&#34;杨超越&#34;</span><span class="o">);</span>
<span class="ln"> 4</span>        <span class="n">Star</span> <span class="n">starProxy</span> <span class="o">=</span> <span class="n">ProxyUtil</span><span class="o">.</span><span class="na">createProxy</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="ln"> 5</span>
<span class="ln"> 6</span>        <span class="n">String</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">starProxy</span><span class="o">.</span><span class="na">sing</span><span class="o">(</span><span class="s">&#34;好日子&#34;</span><span class="o">);</span>
<span class="ln"> 7</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
<span class="ln"> 8</span>
<span class="ln"> 9</span>        <span class="n">starProxy</span><span class="o">.</span><span class="na">dance</span><span class="o">();</span>
<span class="ln">10</span>    <span class="o">}</span>
<span class="ln">11</span><span class="o">}</span>
</code></pre></div><p>应用: 利用代理模式实现AOP, 测试方法耗时.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="ln"> 1</span><span class="kd">public</span> <span class="kd">static</span> <span class="n">UserService</span> <span class="nf">createProxy</span><span class="o">(</span><span class="n">UserService</span> <span class="n">userService</span><span class="o">){</span>
<span class="ln"> 2</span>        <span class="n">UserService</span> <span class="n">userServiceProxy</span> <span class="o">=</span> <span class="o">(</span><span class="n">UserService</span><span class="o">)</span> <span class="n">Proxy</span><span class="o">.</span><span class="na">newProxyInstance</span><span class="o">(</span><span class="n">ProxyUtil</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">(),</span>
<span class="ln"> 3</span>                <span class="k">new</span> <span class="n">Class</span><span class="o">[]{</span><span class="n">UserService</span><span class="o">.</span><span class="na">class</span><span class="o">},</span> <span class="k">new</span> <span class="n">InvocationHandler</span><span class="o">()</span> <span class="o">{</span>
<span class="ln"> 4</span>                    <span class="nd">@Override</span>
<span class="ln"> 5</span>                    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Object</span> <span class="n">proxy</span><span class="o">,</span> <span class="n">Method</span> <span class="n">method</span><span class="o">,</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
<span class="ln"> 6</span>
<span class="ln"> 7</span>                        <span class="k">if</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;login&#34;</span><span class="o">)</span> <span class="o">||</span> <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;deleteUsers&#34;</span><span class="o">)||</span>
<span class="ln"> 8</span>                               <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;selectUsers&#34;</span><span class="o">)){</span>
<span class="ln"> 9</span>                            <span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="ln">10</span>
<span class="ln">11</span>                            <span class="n">Object</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">userService</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
<span class="ln">12</span>
<span class="ln">13</span>                            <span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
<span class="ln">14</span>                            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;方法执行耗时：&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">)/</span> <span class="n">1000</span><span class="o">.</span><span class="na">0</span> <span class="o">+</span> <span class="s">&#34;s&#34;</span><span class="o">);</span>
<span class="ln">15</span>                            <span class="k">return</span> <span class="n">rs</span><span class="o">;</span>
<span class="ln">16</span>                        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
<span class="ln">17</span>                            <span class="n">Object</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">userService</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
<span class="ln">18</span>                            <span class="k">return</span> <span class="n">rs</span><span class="o">;</span>
<span class="ln">19</span>                        <span class="o">}</span>
<span class="ln">20</span>                    <span class="o">}</span>
<span class="ln">21</span>                <span class="o">});</span>
<span class="ln">22</span>        <span class="k">return</span> <span class="n">userServiceProxy</span><span class="o">;</span>
<span class="ln">23</span>    <span class="o">}</span>
</code></pre></div></div><hr /><div class="post-navs d-flex mb-3 justify-content-between">
  <div class="post-nav w-50"><div class="prev-post btn btn-sm">
      <a href="/posts/tech/java-2-mysql/">MySQL学习笔记
</a>
    </div></div>
  <div class="post-nav flex-row-reverse"><div class="next-post btn btn-sm">
      <a href="/posts/tech/java-5-algorithm/">算法刷题
</a>
    </div></div>
</div><section class="related-posts">
    <h3>相关文章</h3>
    <ul class="related-posts"><li><a href="/posts/tech/java-2-mysql/">MySQL学习笔记
</a></li><li><a href="/posts/tech/java-3-spring-cloud/">SpringCloud学习笔记
</a></li><li><a href="/posts/tech/java-1-thread/">Java多线程
</a></li><li><a href="/posts/anime/bokugashinouto/">僕が死のうと思ったのは
</a></li><li><a href="/posts/anime/shinainaru/"> 親愛なる世界へ
</a></li></ul>
  </section></article>




<div id="vcomments" class="post-comments surface row">
</div>
    <script>
        new Valine({
            el: '#vcomments',
            appId: '18xpdRPZMKmyTjmjtMIK8zyB-gzGzoHsz',
            appKey: 'haH3Ysz9ic7RFcoqbIvPDh8H',
            avatar:'retro',
            visitor:true,
            placeholder:'有什么想说的吗？'

        });

        var count = 0;
        var domTimer = setInterval(function () {
            if (++count > 50) clearInterval(domTimer);
            if (document.querySelector('#veditor')) {
                clearInterval(domTimer);
                var cdraw = new CaveDraw({
                    element: "#veditor",
                    readOnlyMode: false, 
                    afterUpdateEditor: ()=>{ 
                        document.querySelector('#veditor').focus();
                        document.querySelector('#veditor').blur();
                    },
                    controls: ['brush', 'eraser', 'bucket', 'clear', 'undo', 'redo', 'save']
                });
            }
        }, 200);
    </script></div>
</div><aside class="col-lg-4 sidebar d-flex">
  <div class="container"><section class="profile surface row">
  <div class="col-xl-6 d-flex align-items-center justify-content-center">
    <img class="profile-avatar img-fluid" src="/images/profile2.jpg" alt="理想奈" loading="lazy">
  </div>
  <div class="col-xl-6">
    <h5 class="profile-name my-2">理想奈</h5><div class="profile-bio mb-2">自强是一切的基础，数学是那红花。</div>
    
  </div>
</section><section class="recent-posts row surface">
  <h4>最近文章</h4>
  <ul><li><a href="/posts/tech/media-erlang-eunit/">eunit测试框架学习
</a></li><li><a href="/posts/tech/media-tcpdump/">tcpdump抓包工具学习
</a></li><li><a href="/posts/tech/media-msml/">MSML语言学习
</a></li><li><a href="/posts/tech/media-netpackage-observe/">观察SIP， SDP，RTP包及MSML
</a></li><li><a href="/posts/tech/media-sipp/">SIPP测试工具学习
</a></li><li><a href="/posts/tech/media-sip/">SIP协议学习
</a></li><li><a href="/posts/tech/media-rebar2/">rebar2构建工具学习
</a></li><li><a href="/posts/tech/media-erlang/">《Erlang程序设计》
</a></li><li><a href="/posts/other/2024/">2024年终总结和来年展望
</a></li><li><a href="/posts/math/estimate/">量化交易系统设想
</a></li><li><a href="/posts/math/beginner/">量化交易初学
</a></li><li><a href="/posts/tech/media-computer-systems/">《深入理解计算机系统》
</a></li><li><a href="/posts/other/physics-computer/">计算机和物理的一点感悟
</a></li></ul>
</section><section class="taxonomy-categories row surface">
      <h4>
        <a href="/categories">分类</a>
      </h4>
      <div><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="计算机">
          计算机 <span class="badge rounded-pill">43</span>
        </a><a href="/categories/%E4%BA%8C%E6%AC%A1%E5%85%83/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="二次元">
          二次元 <span class="badge rounded-pill">24</span>
        </a><a href="/categories/%E6%99%AE%E9%80%9A%E7%B1%BB/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="普通类">
          普通类 <span class="badge rounded-pill">9</span>
        </a><a href="/categories/%E6%96%87%E5%AD%97%E7%B1%BB/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="文字类">
          文字类 <span class="badge rounded-pill">6</span>
        </a><a href="/categories/%E6%95%B0%E5%AD%A6%E7%B1%BB/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="数学类">
          数学类 <span class="badge rounded-pill">4</span>
        </a></div>
    </section><section class="taxonomy-series row surface">
      <h4>
        <a href="/series">专栏</a>
      </h4>
      <div><a href="/series/%E5%AA%92%E4%BD%93%E5%BC%80%E5%8F%91/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="媒体开发">
          媒体开发 <span class="badge rounded-pill">28</span>
        </a><a href="/series/%E5%8A%A8%E6%BC%AB%E6%AD%8C%E6%9B%B2/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="动漫歌曲">
          动漫歌曲 <span class="badge rounded-pill">21</span>
        </a><a href="/series/galgame/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="Galgame">
          Galgame <span class="badge rounded-pill">10</span>
        </a><a href="/series/java/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="Java">
          Java <span class="badge rounded-pill">10</span>
        </a><a href="/series/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="量化交易">
          量化交易 <span class="badge rounded-pill">2</span>
        </a><a href="/series/%E9%9A%8F%E6%84%8F%E6%80%9D%E8%80%83/" class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="随意思考">
          随意思考 <span class="badge rounded-pill">2</span>
        </a></div>
    </section></div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"></nav>
<div class="copyright mb-2">
  Copyright © 2021-2025 Unaybaryl. All Rights Reserved.
</div>
</footer>
<a id="btnScrollToTop" class="btn-scroll-to-top">
  <i class="fas fa-fw fa-chevron-circle-up fa-2x"></i>
</a>



              
            </body>
</html>
